(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.readify = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
!function(){"use strict";for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=new Uint8Array(256),t=0;t<r.length;t++)e[r.charCodeAt(t)]=t;exports.encode=function(e){var t,n=new Uint8Array(e),o=n.length,a="";for(t=0;t<o;t+=3)a+=r[n[t]>>2],a+=r[(3&n[t])<<4|n[t+1]>>4],a+=r[(15&n[t+1])<<2|n[t+2]>>6],a+=r[63&n[t+2]];return o%3===2?a=a.substring(0,a.length-1)+"=":o%3===1&&(a=a.substring(0,a.length-2)+"=="),a},exports.decode=function(r){var t,n,o,a,h,c=.75*r.length,g=r.length,i=0;"="===r[r.length-1]&&(c--,"="===r[r.length-2]&&c--);var u=new ArrayBuffer(c),A=new Uint8Array(u);for(t=0;t<g;t+=4)n=e[r.charCodeAt(t)],o=e[r.charCodeAt(t+1)],a=e[r.charCodeAt(t+2)],h=e[r.charCodeAt(t+3)],A[i++]=n<<2|o>>4,A[i++]=(15&o)<<4|a>>2,A[i++]=(3&a)<<6|63&h;return u}}();
},{}],2:[function(require,module,exports){
"use strict";function placeHoldersCount(o){var r=o.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===o[r-2]?2:"="===o[r-1]?1:0}function byteLength(o){return 3*o.length/4-placeHoldersCount(o)}function toByteArray(o){var r,e,t,u,n,p,a=o.length;n=placeHoldersCount(o),p=new Arr(3*a/4-n),t=n>0?a-4:a;var l=0;for(r=0,e=0;r<t;r+=4,e+=3)u=revLookup[o.charCodeAt(r)]<<18|revLookup[o.charCodeAt(r+1)]<<12|revLookup[o.charCodeAt(r+2)]<<6|revLookup[o.charCodeAt(r+3)],p[l++]=u>>16&255,p[l++]=u>>8&255,p[l++]=255&u;return 2===n?(u=revLookup[o.charCodeAt(r)]<<2|revLookup[o.charCodeAt(r+1)]>>4,p[l++]=255&u):1===n&&(u=revLookup[o.charCodeAt(r)]<<10|revLookup[o.charCodeAt(r+1)]<<4|revLookup[o.charCodeAt(r+2)]>>2,p[l++]=u>>8&255,p[l++]=255&u),p}function tripletToBase64(o){return lookup[o>>18&63]+lookup[o>>12&63]+lookup[o>>6&63]+lookup[63&o]}function encodeChunk(o,r,e){for(var t,u=[],n=r;n<e;n+=3)t=(o[n]<<16)+(o[n+1]<<8)+o[n+2],u.push(tripletToBase64(t));return u.join("")}function fromByteArray(o){for(var r,e=o.length,t=e%3,u="",n=[],p=16383,a=0,l=e-t;a<l;a+=p)n.push(encodeChunk(o,a,a+p>l?l:a+p));return 1===t?(r=o[e-1],u+=lookup[r>>2],u+=lookup[r<<4&63],u+="=="):2===t&&(r=(o[e-2]<<8)+o[e-1],u+=lookup[r>>10],u+=lookup[r>>4&63],u+=lookup[r<<2&63],u+="="),n.push(u),n.join("")}exports.byteLength=byteLength,exports.toByteArray=toByteArray,exports.fromByteArray=fromByteArray;for(var lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63;
},{}],3:[function(require,module,exports){

},{}],4:[function(require,module,exports){
(function (global){
"use strict";function typedArraySupport(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(t,e){if(kMaxLength()<e)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=Buffer.prototype):(null===t&&(t=new Buffer(e)),t.length=e),t}function Buffer(t,e,r){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,t)}return from(this,t,e,r)}function from(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?fromArrayBuffer(t,e,r,n):"string"==typeof e?fromString(t,e,r):fromObject(t,e)}function assertSize(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function alloc(t,e,r,n){return assertSize(e),e<=0?createBuffer(t,e):void 0!==r?"string"==typeof n?createBuffer(t,e).fill(r,n):createBuffer(t,e).fill(r):createBuffer(t,e)}function allocUnsafe(t,e){if(assertSize(e),t=createBuffer(t,e<0?0:0|checked(e)),!Buffer.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function fromString(t,e,r){if("string"==typeof r&&""!==r||(r="utf8"),!Buffer.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|byteLength(e,r);t=createBuffer(t,n);var f=t.write(e,r);return f!==n&&(t=t.slice(0,f)),t}function fromArrayLike(t,e){var r=e.length<0?0:0|checked(e.length);t=createBuffer(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function fromArrayBuffer(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n),Buffer.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=Buffer.prototype):t=fromArrayLike(t,e),t}function fromObject(t,e){if(Buffer.isBuffer(e)){var r=0|checked(e.length);return t=createBuffer(t,r),0===t.length?t:(e.copy(t,0,0,r),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||isnan(e.length)?createBuffer(t,0):fromArrayLike(t,e);if("Buffer"===e.type&&isArray(e.data))return fromArrayLike(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(t){if(t>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|t}function SlowBuffer(t){return+t!=t&&(t=0),Buffer.alloc(+t)}function byteLength(t,e){if(Buffer.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return utf8ToBytes(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return base64ToBytes(t).length;default:if(n)return utf8ToBytes(t).length;e=(""+e).toLowerCase(),n=!0}}function slowToString(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,e>>>=0,r<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return hexSlice(this,e,r);case"utf8":case"utf-8":return utf8Slice(this,e,r);case"ascii":return asciiSlice(this,e,r);case"latin1":case"binary":return latin1Slice(this,e,r);case"base64":return base64Slice(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function swap(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function bidirectionalIndexOf(t,e,r,n,f){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=f?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(f)return-1;r=t.length-1}else if(r<0){if(!f)return-1;r=0}if("string"==typeof e&&(e=Buffer.from(e,n)),Buffer.isBuffer(e))return 0===e.length?-1:arrayIndexOf(t,e,r,n,f);if("number"==typeof e)return e=255&e,Buffer.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?f?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):arrayIndexOf(t,[e],r,n,f);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(t,e,r,n,f){function i(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}var o=1,u=t.length,s=e.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;o=2,u/=2,s/=2,r/=2}var a;if(f){var h=-1;for(a=r;a<u;a++)if(i(t,a)===i(e,h===-1?0:a-h)){if(h===-1&&(h=a),a-h+1===s)return h*o}else h!==-1&&(a-=a-h),h=-1}else for(r+s>u&&(r=u-s),a=r;a>=0;a--){for(var c=!0,l=0;l<s;l++)if(i(t,a+l)!==i(e,l)){c=!1;break}if(c)return a}return-1}function hexWrite(t,e,r,n){r=Number(r)||0;var f=t.length-r;n?(n=Number(n),n>f&&(n=f)):n=f;var i=e.length;if(i%2!==0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var o=0;o<n;++o){var u=parseInt(e.substr(2*o,2),16);if(isNaN(u))return o;t[r+o]=u}return o}function utf8Write(t,e,r,n){return blitBuffer(utf8ToBytes(e,t.length-r),t,r,n)}function asciiWrite(t,e,r,n){return blitBuffer(asciiToBytes(e),t,r,n)}function latin1Write(t,e,r,n){return asciiWrite(t,e,r,n)}function base64Write(t,e,r,n){return blitBuffer(base64ToBytes(e),t,r,n)}function ucs2Write(t,e,r,n){return blitBuffer(utf16leToBytes(e,t.length-r),t,r,n)}function base64Slice(t,e,r){return 0===e&&r===t.length?base64.fromByteArray(t):base64.fromByteArray(t.slice(e,r))}function utf8Slice(t,e,r){r=Math.min(t.length,r);for(var n=[],f=e;f<r;){var i=t[f],o=null,u=i>239?4:i>223?3:i>191?2:1;if(f+u<=r){var s,a,h,c;switch(u){case 1:i<128&&(o=i);break;case 2:s=t[f+1],128===(192&s)&&(c=(31&i)<<6|63&s,c>127&&(o=c));break;case 3:s=t[f+1],a=t[f+2],128===(192&s)&&128===(192&a)&&(c=(15&i)<<12|(63&s)<<6|63&a,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:s=t[f+1],a=t[f+2],h=t[f+3],128===(192&s)&&128===(192&a)&&128===(192&h)&&(c=(15&i)<<18|(63&s)<<12|(63&a)<<6|63&h,c>65535&&c<1114112&&(o=c))}}null===o?(o=65533,u=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),f+=u}return decodeCodePointsArray(n)}function decodeCodePointsArray(t){var e=t.length;if(e<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=MAX_ARGUMENTS_LENGTH));return r}function asciiSlice(t,e,r){var n="";r=Math.min(t.length,r);for(var f=e;f<r;++f)n+=String.fromCharCode(127&t[f]);return n}function latin1Slice(t,e,r){var n="";r=Math.min(t.length,r);for(var f=e;f<r;++f)n+=String.fromCharCode(t[f]);return n}function hexSlice(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var f="",i=e;i<r;++i)f+=toHex(t[i]);return f}function utf16leSlice(t,e,r){for(var n=t.slice(e,r),f="",i=0;i<n.length;i+=2)f+=String.fromCharCode(n[i]+256*n[i+1]);return f}function checkOffset(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function checkInt(t,e,r,n,f,i){if(!Buffer.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>f||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function objectWriteUInt16(t,e,r,n){e<0&&(e=65535+e+1);for(var f=0,i=Math.min(t.length-r,2);f<i;++f)t[r+f]=(e&255<<8*(n?f:1-f))>>>8*(n?f:1-f)}function objectWriteUInt32(t,e,r,n){e<0&&(e=4294967295+e+1);for(var f=0,i=Math.min(t.length-r,4);f<i;++f)t[r+f]=e>>>8*(n?f:3-f)&255}function checkIEEE754(t,e,r,n,f,i){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function writeFloat(t,e,r,n,f){return f||checkIEEE754(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),ieee754.write(t,e,r,n,23,4),r+4}function writeDouble(t,e,r,n,f){return f||checkIEEE754(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),ieee754.write(t,e,r,n,52,8),r+8}function base64clean(t){if(t=stringtrim(t).replace(INVALID_BASE64_RE,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function stringtrim(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function toHex(t){return t<16?"0"+t.toString(16):t.toString(16)}function utf8ToBytes(t,e){e=e||1/0;for(var r,n=t.length,f=null,i=[],o=0;o<n;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!f){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&i.push(239,191,189);continue}f=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),f=r;continue}r=(f-55296<<10|r-56320)+65536}else f&&(e-=3)>-1&&i.push(239,191,189);if(f=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function asciiToBytes(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function utf16leToBytes(t,e){for(var r,n,f,i=[],o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,f=r%256,i.push(f),i.push(n);return i}function base64ToBytes(t){return base64.toByteArray(base64clean(t))}function blitBuffer(t,e,r,n){for(var f=0;f<n&&!(f+r>=e.length||f>=t.length);++f)e[f+r]=t[f];return f}function isnan(t){return t!==t}var base64=require("base64-js"),ieee754=require("ieee754"),isArray=require("isarray");exports.Buffer=Buffer,exports.SlowBuffer=SlowBuffer,exports.INSPECT_MAX_BYTES=50,Buffer.TYPED_ARRAY_SUPPORT=void 0!==global.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:typedArraySupport(),exports.kMaxLength=kMaxLength(),Buffer.poolSize=8192,Buffer._augment=function(t){return t.__proto__=Buffer.prototype,t},Buffer.from=function(t,e,r){return from(null,t,e,r)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0})),Buffer.alloc=function(t,e,r){return alloc(null,t,e,r)},Buffer.allocUnsafe=function(t){return allocUnsafe(null,t)},Buffer.allocUnsafeSlow=function(t){return allocUnsafe(null,t)},Buffer.isBuffer=function(t){return!(null==t||!t._isBuffer)},Buffer.compare=function(t,e){if(!Buffer.isBuffer(t)||!Buffer.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,f=0,i=Math.min(r,n);f<i;++f)if(t[f]!==e[f]){r=t[f],n=e[f];break}return r<n?-1:n<r?1:0},Buffer.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(t,e){if(!isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return Buffer.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=Buffer.allocUnsafe(e),f=0;for(r=0;r<t.length;++r){var i=t[r];if(!Buffer.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,f),f+=i.length}return n},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)swap(this,e,e+1);return this},Buffer.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)swap(this,e,e+3),swap(this,e+1,e+2);return this},Buffer.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)swap(this,e,e+7),swap(this,e+1,e+6),swap(this,e+2,e+5),swap(this,e+3,e+4);return this},Buffer.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?utf8Slice(this,0,t):slowToString.apply(this,arguments)},Buffer.prototype.equals=function(t){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===Buffer.compare(this,t)},Buffer.prototype.inspect=function(){var t="",e=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},Buffer.prototype.compare=function(t,e,r,n,f){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===f&&(f=this.length),e<0||r>t.length||n<0||f>this.length)throw new RangeError("out of range index");if(n>=f&&e>=r)return 0;if(n>=f)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,f>>>=0,this===t)return 0;for(var i=f-n,o=r-e,u=Math.min(i,o),s=this.slice(n,f),a=t.slice(e,r),h=0;h<u;++h)if(s[h]!==a[h]){i=s[h],o=a[h];break}return i<o?-1:o<i?1:0},Buffer.prototype.includes=function(t,e,r){return this.indexOf(t,e,r)!==-1},Buffer.prototype.indexOf=function(t,e,r){return bidirectionalIndexOf(this,t,e,r,!0)},Buffer.prototype.lastIndexOf=function(t,e,r){return bidirectionalIndexOf(this,t,e,r,!1)},Buffer.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e=0|e,isFinite(r)?(r=0|r,void 0===n&&(n="utf8")):(n=r,r=void 0)}var f=this.length-e;if((void 0===r||r>f)&&(r=f),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return hexWrite(this,t,e,r);case"utf8":case"utf-8":return utf8Write(this,t,e,r);case"ascii":return asciiWrite(this,t,e,r);case"latin1":case"binary":return latin1Write(this,t,e,r);case"base64":return base64Write(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,t,e,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;Buffer.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),e<t&&(e=t);var n;if(Buffer.TYPED_ARRAY_SUPPORT)n=this.subarray(t,e),n.__proto__=Buffer.prototype;else{var f=e-t;n=new Buffer(f,void 0);for(var i=0;i<f;++i)n[i]=this[i+t]}return n},Buffer.prototype.readUIntLE=function(t,e,r){t=0|t,e=0|e,r||checkOffset(t,e,this.length);for(var n=this[t],f=1,i=0;++i<e&&(f*=256);)n+=this[t+i]*f;return n},Buffer.prototype.readUIntBE=function(t,e,r){t=0|t,e=0|e,r||checkOffset(t,e,this.length);for(var n=this[t+--e],f=1;e>0&&(f*=256);)n+=this[t+--e]*f;return n},Buffer.prototype.readUInt8=function(t,e){return e||checkOffset(t,1,this.length),this[t]},Buffer.prototype.readUInt16LE=function(t,e){return e||checkOffset(t,2,this.length),this[t]|this[t+1]<<8},Buffer.prototype.readUInt16BE=function(t,e){return e||checkOffset(t,2,this.length),this[t]<<8|this[t+1]},Buffer.prototype.readUInt32LE=function(t,e){return e||checkOffset(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},Buffer.prototype.readUInt32BE=function(t,e){return e||checkOffset(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},Buffer.prototype.readIntLE=function(t,e,r){t=0|t,e=0|e,r||checkOffset(t,e,this.length);for(var n=this[t],f=1,i=0;++i<e&&(f*=256);)n+=this[t+i]*f;return f*=128,n>=f&&(n-=Math.pow(2,8*e)),n},Buffer.prototype.readIntBE=function(t,e,r){t=0|t,e=0|e,r||checkOffset(t,e,this.length);for(var n=e,f=1,i=this[t+--n];n>0&&(f*=256);)i+=this[t+--n]*f;return f*=128,i>=f&&(i-=Math.pow(2,8*e)),i},Buffer.prototype.readInt8=function(t,e){return e||checkOffset(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},Buffer.prototype.readInt16LE=function(t,e){e||checkOffset(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt16BE=function(t,e){e||checkOffset(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt32LE=function(t,e){return e||checkOffset(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},Buffer.prototype.readInt32BE=function(t,e){return e||checkOffset(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},Buffer.prototype.readFloatLE=function(t,e){return e||checkOffset(t,4,this.length),ieee754.read(this,t,!0,23,4)},Buffer.prototype.readFloatBE=function(t,e){return e||checkOffset(t,4,this.length),ieee754.read(this,t,!1,23,4)},Buffer.prototype.readDoubleLE=function(t,e){return e||checkOffset(t,8,this.length),ieee754.read(this,t,!0,52,8)},Buffer.prototype.readDoubleBE=function(t,e){return e||checkOffset(t,8,this.length),ieee754.read(this,t,!1,52,8)},Buffer.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e=0|e,r=0|r,!n){var f=Math.pow(2,8*r)-1;checkInt(this,t,e,r,f,0)}var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},Buffer.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e=0|e,r=0|r,!n){var f=Math.pow(2,8*r)-1;checkInt(this,t,e,r,f,0)}var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},Buffer.prototype.writeUInt8=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},Buffer.prototype.writeUInt16LE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeUInt16BE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeUInt32LE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeUInt32BE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e=0|e,!n){var f=Math.pow(2,8*r-1);checkInt(this,t,e,r,f-1,-f)}var i=0,o=1,u=0;for(this[e]=255&t;++i<r&&(o*=256);)t<0&&0===u&&0!==this[e+i-1]&&(u=1),this[e+i]=(t/o>>0)-u&255;return e+r},Buffer.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e=0|e,!n){var f=Math.pow(2,8*r-1);checkInt(this,t,e,r,f-1,-f)}var i=r-1,o=1,u=0;for(this[e+i]=255&t;--i>=0&&(o*=256);)t<0&&0===u&&0!==this[e+i+1]&&(u=1),this[e+i]=(t/o>>0)-u&255;return e+r},Buffer.prototype.writeInt8=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},Buffer.prototype.writeInt16LE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeInt16BE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeInt32LE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeInt32BE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeFloatLE=function(t,e,r){return writeFloat(this,t,e,!0,r)},Buffer.prototype.writeFloatBE=function(t,e,r){return writeFloat(this,t,e,!1,r)},Buffer.prototype.writeDoubleLE=function(t,e,r){return writeDouble(this,t,e,!0,r)},Buffer.prototype.writeDoubleBE=function(t,e,r){return writeDouble(this,t,e,!1,r)},Buffer.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var f,i=n-r;if(this===t&&r<e&&e<n)for(f=i-1;f>=0;--f)t[f+e]=this[f+r];else if(i<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(f=0;f<i;++f)t[f+e]=this[f+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+i),e);return i},Buffer.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var f=t.charCodeAt(0);f<256&&(t=f)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!Buffer.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t=255&t);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0);var i;if("number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{var o=Buffer.isBuffer(t)?t:utf8ToBytes(new Buffer(t,n).toString()),u=o.length;for(i=0;i<r-e;++i)this[i+e]=o[i%u]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"base64-js":2,"ieee754":37,"isarray":38}],5:[function(require,module,exports){
"use strict";function _toConsumableArray(r){if(Array.isArray(r)){for(var t=0,n=Array(r.length);t<r.length;t++)n[t]=r[t];return n}return Array.from(r)}function currify(r){check(r);var t=tail(arguments);return t.length>=r.length?r.apply(void 0,_toConsumableArray(t)):function(){return currify.apply(void 0,[r].concat(_toConsumableArray(t),Array.prototype.slice.call(arguments)))}}function check(r){if("function"!=typeof r)throw Error("fn should be function!")}module.exports=currify;var tail=function(r){return[].slice.call(r,1)};
},{}],6:[function(require,module,exports){
(function (process,global){
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.ES6Promise=e()}(this,function(){"use strict";function t(t){return"function"==typeof t||"object"==typeof t&&null!==t}function e(t){return"function"==typeof t}function n(t){I=t}function r(t){J=t}function o(){return function(){return process.nextTick(a)}}function i(){return"undefined"!=typeof H?function(){H(a)}:c()}function s(){var t=0,e=new V(a),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function u(){var t=new MessageChannel;return t.port1.onmessage=a,function(){return t.port2.postMessage(0)}}function c(){var t=setTimeout;return function(){return t(a,1)}}function a(){for(var t=0;t<G;t+=2){var e=$[t],n=$[t+1];e(n),$[t]=void 0,$[t+1]=void 0}G=0}function f(){try{var t=require,e=t("vertx");return H=e.runOnLoop||e.runOnContext,i()}catch(t){return c()}}function l(t,e){var n=arguments,r=this,o=new this.constructor(p);void 0===o[et]&&k(o);var i=r._state;return i?!function(){var t=n[i-1];J(function(){return x(i,o,t,r._result)})}():E(r,o,t,e),o}function h(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(p);return g(n,t),n}function p(){}function v(){return new TypeError("You cannot resolve a promise with itself")}function d(){return new TypeError("A promises callback cannot return that same promise.")}function _(t){try{return t.then}catch(t){return it.error=t,it}}function y(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}function m(t,e,n){J(function(t){var r=!1,o=y(n,e,function(n){r||(r=!0,e!==n?g(t,n):S(t,n))},function(e){r||(r=!0,j(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&o&&(r=!0,j(t,o))},t)}function b(t,e){e._state===rt?S(t,e._result):e._state===ot?j(t,e._result):E(e,void 0,function(e){return g(t,e)},function(e){return j(t,e)})}function w(t,n,r){n.constructor===t.constructor&&r===l&&n.constructor.resolve===h?b(t,n):r===it?j(t,it.error):void 0===r?S(t,n):e(r)?m(t,n,r):S(t,n)}function g(e,n){e===n?j(e,v()):t(n)?w(e,n,_(n)):S(e,n)}function A(t){t._onerror&&t._onerror(t._result),T(t)}function S(t,e){t._state===nt&&(t._result=e,t._state=rt,0!==t._subscribers.length&&J(T,t))}function j(t,e){t._state===nt&&(t._state=ot,t._result=e,J(A,t))}function E(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+rt]=n,o[i+ot]=r,0===i&&t._state&&J(T,t)}function T(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,o=void 0,i=t._result,s=0;s<e.length;s+=3)r=e[s],o=e[s+n],r?x(n,r,o,i):o(i);t._subscribers.length=0}}function M(){this.error=null}function P(t,e){try{return t(e)}catch(t){return st.error=t,st}}function x(t,n,r,o){var i=e(r),s=void 0,u=void 0,c=void 0,a=void 0;if(i){if(s=P(r,o),s===st?(a=!0,u=s.error,s=null):c=!0,n===s)return void j(n,d())}else s=o,c=!0;n._state!==nt||(i&&c?g(n,s):a?j(n,u):t===rt?S(n,s):t===ot&&j(n,s))}function C(t,e){try{e(function(e){g(t,e)},function(e){j(t,e)})}catch(e){j(t,e)}}function O(){return ut++}function k(t){t[et]=ut++,t._state=void 0,t._result=void 0,t._subscribers=[]}function Y(t,e){this._instanceConstructor=t,this.promise=new t(p),this.promise[et]||k(this.promise),B(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?S(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&S(this.promise,this._result))):j(this.promise,q())}function q(){return new Error("Array Methods must be provided an Array")}function F(t){return new Y(this,t).promise}function D(t){var e=this;return new e(B(t)?function(n,r){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(n,r)}:function(t,e){return e(new TypeError("You must pass an array to race."))})}function K(t){var e=this,n=new e(p);return j(n,t),n}function L(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function N(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function U(t){this[et]=O(),this._result=this._state=void 0,this._subscribers=[],p!==t&&("function"!=typeof t&&L(),this instanceof U?C(this,t):N())}function W(){var t=void 0;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=U}var z=void 0;z=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var B=z,G=0,H=void 0,I=void 0,J=function(t,e){$[G]=t,$[G+1]=e,G+=2,2===G&&(I?I(a):tt())},Q="undefined"!=typeof window?window:void 0,R=Q||{},V=R.MutationObserver||R.WebKitMutationObserver,X="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),Z="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,$=new Array(1e3),tt=void 0;tt=X?o():V?s():Z?u():void 0===Q&&"function"==typeof require?f():c();var et=Math.random().toString(36).substring(16),nt=void 0,rt=1,ot=2,it=new M,st=new M,ut=0;return Y.prototype._enumerate=function(){for(var t=this.length,e=this._input,n=0;this._state===nt&&n<t;n++)this._eachEntry(e[n],n)},Y.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===h){var o=_(t);if(o===l&&t._state!==nt)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===U){var i=new n(p);w(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},Y.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===nt&&(this._remaining--,t===ot?j(r,n):this._result[e]=n),0===this._remaining&&S(r,this._result)},Y.prototype._willSettleAt=function(t,e){var n=this;E(t,void 0,function(t){return n._settledAt(rt,e,t)},function(t){return n._settledAt(ot,e,t)})},U.all=F,U.race=D,U.resolve=h,U.reject=K,U._setScheduler=n,U._setAsap=r,U._asap=J,U.prototype={constructor:U,then:l,catch:function(t){return this.then(null,t)}},U.polyfill=W,U.Promise=U,U});
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"_process":39}],7:[function(require,module,exports){
(function (global){
"use strict";module.exports=function(){function r(r){return"function"==typeof r}var e=void 0;e=void 0!==global?global:void 0!==window&&window.document?window:self;var o=function(){if(!e.hasOwnProperty("Promise"))return!1;var o=e.Promise;return!(!o.hasOwnProperty("resolve")||!o.hasOwnProperty("reject"))&&(!(!o.hasOwnProperty("all")||!o.hasOwnProperty("race"))&&function(){var o=void 0,n=new e.Promise(function(r){o=r});return!!n&&r(o)}())}();return o?e.Promise:require("es6-promise").Promise}();
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"es6-promise":6}],8:[function(require,module,exports){
"use strict";module.exports=function(){function r(r){return r&&"function"==typeof r.then&&"function"==typeof r.catch}var n=require("./promise.js");return function(t,u){return function(){for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];var f=u&&u.multiArgs,c=void 0;return u&&u.thisArg?c=u.thisArg:u&&(c=u),new n(function(n,u){i.push(function(r){if(r)return u(r);for(var t=arguments.length,e=Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];return!1==!!f?n(e[0]):void n(e)});var e=t.apply(c,i);r(e)&&n(e)})}}}();
},{"./promise.js":7}],9:[function(require,module,exports){
!function(r){"use strict";function n(){function r(r){var n=new RegExp("\\s([a-zA-Z]+)"),t={}.toString.call(r),e=t.match(n)[1],a=e.toLowerCase();return a}var n=Array.prototype.slice,t=function(r){var t,e="function"==typeof r,a=n.call(arguments,1);return e&&(t=r.apply(null,a)),t};return t.with=function(r){var n=Array.prototype.slice,t=n.call(arguments,1);return function(){var e=n.call(arguments),a=t.concat(e);return r.apply(null,a)}},t.ret=function(){var r,e=n.call(arguments);return e.unshift(t),r=t.with.apply(null,e)},t.if=function(r,n,e){var a;return r?t(n):t(e,n),a},t.ifExist=function(r,n,t){var e,a=r&&r[n];return a&&(a=a.apply(r,t)),e},t.parallel=function(e,a){function c(r,t){var e=n.call(t,1),c=!1,o=t[0],u=e.length;++s,c=s===p,o||(u>=2?i[r]=e:i[r]=e[0]),l||!o&&!c||(l=!0,"array"===h?a.apply(null,[o].concat(i)):a(o,i))}var o="could not be empty!",u=[],l=!1,i=[],f={},s=0,p=0,h=r(e);if(!e)throw Error("funcs "+o);if(!a)throw Error("callback "+o);switch(h){case"array":p=e.length,e.forEach(function(r,n){t(r,function(){c(n,arguments)})});break;case"object":u=Object.keys(e),p=u.length,u.forEach(function(r){var n=e[r];t(n,function(){c(r,arguments,f)})})}},t.series=function(r,n){var e,a=r.length,c=function(r){var e;return--a,a&&!r||(e=!0,t(n,r)),e};if(!Array.isArray(r))throw Error("funcs should be array!");e=r.shift(),t(e,function(e){c(e)||t.series(r,n)})},t.each=function(r,n,e){var a=r.map(function(r){return n.bind(null,r)});a.length?t.parallel(a,e):e()},t.eachSeries=function(r,n,e){var a=r.map(function(r){return n.bind(null,r)});if("function"!=typeof e)throw Error("callback should be function");a.length?t.series(a,e):e()},t.try=function(r){var n;try{n=r()}catch(r){n=r}return n},t}"object"==typeof module&&module.exports?module.exports=new n:r.exec=new n}(this);
},{}],10:[function(require,module,exports){
(function (process){
!function(){var e={};"undefined"!=typeof process&&process.nextTick?(e.nextTick=process.nextTick,"undefined"!=typeof setImmediate?e.setImmediate=function(e){setImmediate(e)}:e.setImmediate=e.nextTick):"function"==typeof setImmediate?(e.nextTick=function(e){setImmediate(e)},e.setImmediate=e.nextTick):(e.nextTick=function(e){setTimeout(e,0)},e.setImmediate=e.nextTick),e.eachSeries=function(e,t,n){if(n=n||function(){},!e.length)return n();var i=0,o=function(){t(e[i],function(t){t?(n(t),n=function(){}):(i+=1,i>=e.length?n():o())})};o()},e.forEachSeries=e.eachSeries,"undefined"!=typeof define&&define.amd?define([],function(){return e}):"undefined"!=typeof module&&module.exports?module.exports=e:root.async=e}();
}).call(this,require('_process'))

},{"_process":39}],11:[function(require,module,exports){
function removeItem(t,e){for(var r=e.length-1;r>=0;r--)e[r]===t&&e.splice(r,1);return e}var EventEmitter=function(){};EventEmitter.createInterface=function(t){var e={};return e.on=function(e,r){"undefined"==typeof this[t]&&(this[t]={}),this[t].hasOwnProperty(e)||(this[t][e]=[]),this[t][e].push(r)},e.off=function(e,r){"undefined"!=typeof this[t]&&this[t].hasOwnProperty(e)&&removeItem(r,this[t][e])},e.trigger=function(e){if("undefined"!=typeof this[t]&&this[t].hasOwnProperty(e))for(var r=Array.prototype.slice.call(arguments,1),n=0;n<this[t][e].length;n++)this[t][e][n].apply(this[t][e][n],r)},e.removeAllListeners=function(e){if("undefined"!=typeof this[t]){var r=this;r[t][e].forEach(function(t){r.off(e,t)})}},e};var pvt=EventEmitter.createInterface("_handlers");EventEmitter.prototype._on=pvt.on,EventEmitter.prototype._off=pvt.off,EventEmitter.prototype._trigger=pvt.trigger;var pub=EventEmitter.createInterface("handlers");EventEmitter.prototype.on=function(){pub.on.apply(this,arguments),Array.prototype.unshift.call(arguments,"on"),this._trigger.apply(this,arguments)},EventEmitter.prototype.off=pub.off,EventEmitter.prototype.trigger=pub.trigger,EventEmitter.prototype.removeAllListeners=pub.removeAllListeners,module.exports=EventEmitter;
},{}],12:[function(require,module,exports){
(function (global){
function throttle(t,e){var o=0;return function(){var r=Date.now();r-o>t&&(o=r,e.apply(this,arguments))}}function extend(t,e){if("undefined"!=typeof t&&t||(t={}),"object"==typeof e)for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);return t}function Intercom(){var t=this,e=Date.now();this.origin=guid(),this.lastMessage=e,this.receivedIDs={},this.previousValues={};var o=function(){t._onStorageEvent.apply(t,arguments)};"undefined"!=typeof document&&(document.attachEvent?document.attachEvent("onstorage",o):global.addEventListener("storage",o,!1))}var EventEmitter=require("./eventemitter.js"),guid=require("../src/shared.js").guid,localStorage=function(t){return"undefined"==typeof t||"undefined"==typeof t.localStorage?{getItem:function(){},setItem:function(){},removeItem:function(){}}:t.localStorage}(global);Intercom.prototype._transaction=function(t){function e(){if(!a){var l=Date.now(),u=0|localStorage.getItem(INDEX_LOCK);if(u&&l-u<r)return c||(i._on("storage",e),c=!0),void(s=setTimeout(e,n));a=!0,localStorage.setItem(INDEX_LOCK,l),t(),o()}}function o(){c&&i._off("storage",e),s&&clearTimeout(s),localStorage.removeItem(INDEX_LOCK)}var r=1e3,n=20,i=this,a=!1,c=!1,s=null;e()},Intercom.prototype._cleanup_emit=throttle(100,function(){var t=this;t._transaction(function(){var t,e=Date.now(),o=e-THRESHOLD_TTL_EMIT,r=0;try{t=JSON.parse(localStorage.getItem(INDEX_EMIT)||"[]")}catch(e){t=[]}for(var n=t.length-1;n>=0;n--)t[n].timestamp<o&&(t.splice(n,1),r++);r>0&&localStorage.setItem(INDEX_EMIT,JSON.stringify(t))})}),Intercom.prototype._cleanup_once=throttle(100,function(){var t=this;t._transaction(function(){var e,o,r=(Date.now(),0);try{o=JSON.parse(localStorage.getItem(INDEX_ONCE)||"{}")}catch(t){o={}}for(e in o)t._once_expired(e,o)&&(delete o[e],r++);r>0&&localStorage.setItem(INDEX_ONCE,JSON.stringify(o))})}),Intercom.prototype._once_expired=function(t,e){if(!e)return!0;if(!e.hasOwnProperty(t))return!0;if("object"!=typeof e[t])return!0;var o=e[t].ttl||THRESHOLD_TTL_ONCE,r=Date.now(),n=e[t].timestamp;return n<r-o},Intercom.prototype._localStorageChanged=function(t,e){if(t&&t.key)return t.key===e;var o=localStorage.getItem(e);return o!==this.previousValues[e]&&(this.previousValues[e]=o,!0)},Intercom.prototype._onStorageEvent=function(t){t=t||global.event;var e=this;this._localStorageChanged(t,INDEX_EMIT)&&this._transaction(function(){var t,o=Date.now(),r=localStorage.getItem(INDEX_EMIT);try{t=JSON.parse(r||"[]")}catch(e){t=[]}for(var n=0;n<t.length;n++)if(t[n].origin!==e.origin&&!(t[n].timestamp<e.lastMessage)){if(t[n].id){if(e.receivedIDs.hasOwnProperty(t[n].id))continue;e.receivedIDs[t[n].id]=!0}e.trigger(t[n].name,t[n].payload)}e.lastMessage=o}),this._trigger("storage",t)},Intercom.prototype._emit=function(t,e,o){if(o="string"==typeof o||"number"==typeof o?String(o):null,o&&o.length){if(this.receivedIDs.hasOwnProperty(o))return;this.receivedIDs[o]=!0}var r={id:o,name:t,origin:this.origin,timestamp:Date.now(),payload:e},n=this;this._transaction(function(){var o=localStorage.getItem(INDEX_EMIT)||"[]",i="[]"===o?"":",";o=[o.substring(0,o.length-1),i,JSON.stringify(r),"]"].join(""),localStorage.setItem(INDEX_EMIT,o),n.trigger(t,e),setTimeout(function(){n._cleanup_emit()},50)})},Intercom.prototype.emit=function(t,e){this._emit.apply(this,arguments),this._trigger("emit",t,e)},Intercom.prototype.once=function(t,e,o){if(Intercom.supported){var r=this;this._transaction(function(){var n;try{n=JSON.parse(localStorage.getItem(INDEX_ONCE)||"{}")}catch(t){n={}}r._once_expired(t,n)&&(n[t]={},n[t].timestamp=Date.now(),"number"==typeof o&&(n[t].ttl=1e3*o),localStorage.setItem(INDEX_ONCE,JSON.stringify(n)),e(),setTimeout(function(){r._cleanup_once()},50))})}},extend(Intercom.prototype,EventEmitter.prototype),Intercom.supported="undefined"!=typeof localStorage;var INDEX_EMIT="intercom",INDEX_ONCE="intercom_once",INDEX_LOCK="intercom_lock",THRESHOLD_TTL_EMIT=5e4,THRESHOLD_TTL_ONCE=36e5;Intercom.destroy=function(){localStorage.removeItem(INDEX_LOCK),localStorage.removeItem(INDEX_EMIT),localStorage.removeItem(INDEX_ONCE)},Intercom.getInstance=function(){var t;return function(){return t||(t=new Intercom),t}}(),module.exports=Intercom;
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"../src/shared.js":31,"./eventemitter.js":11}],13:[function(require,module,exports){
function has(e,r){return hasOwnProperty.call(e,r)}function size(e){return null==e?0:e.length===+e.length?e.length:keys(e).length}function identity(e){return e}function each(e,r,n){var t,a;if(null!=e)if(nativeForEach&&e.forEach===nativeForEach)e.forEach(r,n);else if(e.length===+e.length){for(t=0,a=e.length;t<a;t++)if(r.call(n,e[t],t,e)===breaker)return}else{var o=o(e);for(t=0,a=o.length;t<a;t++)if(r.call(n,e[o[t]],o[t],e)===breaker)return}}function any(e,r,n){r||(r=identity);var t=!1;return null==e?t:nativeSome&&e.some===nativeSome?e.some(r,n):(each(e,function(e,a,o){if(t||(t=r.call(n,e,a,o)))return breaker}),!!t)}function contains(e,r){return null!=e&&(nativeIndexOf&&e.indexOf===nativeIndexOf?e.indexOf(r)!=-1:any(e,function(e){return e===r}))}function Wrapped(e){this.value=e}function nodash(e){return e&&"object"==typeof e&&!Array.isArray(e)&&hasOwnProperty.call(e,"__wrapped__")?e:new Wrapped(e)}var ArrayProto=Array.prototype,nativeForEach=ArrayProto.forEach,nativeIndexOf=ArrayProto.indexOf,nativeSome=ArrayProto.some,ObjProto=Object.prototype,hasOwnProperty=ObjProto.hasOwnProperty,nativeKeys=Object.keys,breaker={},keys=nativeKeys||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var r=[];for(var n in e)has(e,n)&&r.push(n);return r};Wrapped.prototype.has=function(e){return has(this.value,e)},Wrapped.prototype.contains=function(e){return contains(this.value,e)},Wrapped.prototype.size=function(){return size(this.value)},module.exports=nodash;
},{}],14:[function(require,module,exports){
(function (process){
!function(t,e,n,r){function i(t){return t.split("").reduce(function(t,e){return t[e]=!0,t},{})}function s(t,e){return e=e||{},function(n,r,i){return u(n,t,e)}}function a(t,e){t=t||{},e=e||{};var n={};return Object.keys(e).forEach(function(t){n[t]=e[t]}),Object.keys(t).forEach(function(e){n[e]=t[e]}),n}function u(t,e,n){if("string"!=typeof e)throw new TypeError("glob pattern string required");return n||(n={}),!(!n.nocomment&&"#"===e.charAt(0))&&(""===e.trim()?""===t:new o(e,n).match(t))}function o(t,e){if(!(this instanceof o))return new o(t,e,y);if("string"!=typeof t)throw new TypeError("glob pattern string required");e||(e={}),t=t.trim(),"win32"===r&&(t=t.split("\\").join("/"));var n=t+"\n"+x(e),i=u.cache.get(n);return i?i:(u.cache.set(n,this),this.options=e,this.set=[],this.pattern=t,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,void this.make())}function c(){if(!this._made){var t=this.pattern,e=this.options;if(!e.nocomment&&"#"===t.charAt(0))return void(this.comment=!0);if(!t)return void(this.empty=!0);this.parseNegate();var n=this.globSet=this.braceExpand();e.debug&&(this.debug=console.error),this.debug(this.pattern,n),n=this.globParts=n.map(function(t){return t.split(S)}),this.debug(this.pattern,n),n=n.map(function(t,e,n){return t.map(this.parse,this)},this),this.debug(this.pattern,n),n=n.filter(function(t){return-1===t.indexOf(!1)}),this.debug(this.pattern,n),this.set=n}}function h(){var t=this.pattern,e=!1,n=this.options,r=0;if(!n.nonegate){for(var i=0,s=t.length;i<s&&"!"===t.charAt(i);i++)e=!e,r++;r&&(this.pattern=t.substr(r)),this.negate=e}}function f(t,e,n){return n=n||"0",t+="",t.length>=e?t:new Array(e-t.length+1).join(n)+t}function p(t,e){function n(){y.push(k),k=""}if(e=e||this.options,t="undefined"==typeof t?this.pattern:t,"undefined"==typeof t)throw new Error("undefined pattern");if(e.nobrace||!t.match(/\{.*\}/))return[t];var r=!1;if("{"!==t.charAt(0)){this.debug(t);for(var i=null,s=0,a=t.length;s<a;s++){var u=t.charAt(s);if(this.debug(s,u),"\\"===u)r=!r;else if("{"===u&&!r){i=t.substr(0,s);break}}if(null===i)return this.debug("no sets"),[t];var o=p.call(this,t.substr(s),e);return o.map(function(t){return i+t})}var c=t.match(/^\{(-?[0-9]+)\.\.(-?[0-9]+)\}/);if(c){this.debug("numset",c[1],c[2]);for(var h,g=p.call(this,t.substr(c[0].length),e),l=+c[1],d="0"===c[1][0],b=c[1].length,m=+c[2],v=l>m?-1:1,y=[],s=l;s!=m+v;s+=v){h=d?f(s,b):s+"";for(var w=0,x=g.length;w<x;w++)y.push(h+g[w])}return y}var s=1,j=1,y=[],k="",r=!1;this.debug("Entering for");t:for(s=1,a=t.length;s<a;s++){var u=t.charAt(s);if(this.debug("",s,u),r)r=!1,k+="\\"+u;else switch(u){case"\\":r=!0;continue;case"{":j++,k+="{";continue;case"}":if(j--,0===j){n(),s++;break t}k+=u;continue;case",":1===j?n():k+=u;continue;default:k+=u;continue}}if(0!==j)return this.debug("didn't close",t),p.call(this,"\\"+t,e);this.debug("set",y),this.debug("suffix",t.substr(s));var g=p.call(this,t.substr(s),e),A=1===y.length;this.debug("set pre-expanded",y),y=y.map(function(t){return p.call(this,t,e)},this),this.debug("set expanded",y),y=y.reduce(function(t,e){return t.concat(e)}),A&&(y=y.map(function(t){return"{"+t+"}"}));for(var O=[],s=0,a=y.length;s<a;s++)for(var w=0,x=g.length;w<x;w++)O.push(y[s]+g[w]);return O}function g(t,e){function n(){if(s){switch(s){case"*":u+=k,o=!0;break;case"?":u+=j,o=!0;break;default:u+="\\"+s}d.debug("clearStateChar %j %j",s,u),s=!1}}var r=this.options;if(!r.noglobstar&&"**"===t)return w;if(""===t)return"";for(var i,s,a,u="",o=!!r.nocase,c=!1,h=[],f=!1,p=-1,g=-1,l="."===t.charAt(0)?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",d=this,m=0,v=t.length;m<v&&(a=t.charAt(m));m++)if(this.debug("%s\t%s %s %j",t,m,u,a),c&&E[a])u+="\\"+a,c=!1;else switch(a){case"/":return!1;case"\\":n(),c=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",t,m,u,a),f){this.debug("  in class"),"!"===a&&m===g+1&&(a="^"),u+=a;continue}d.debug("call clearStateChar %j",s),n(),s=a,r.noext&&n();continue;case"(":if(f){u+="(";continue}if(!s){u+="\\(";continue}i=s,h.push({type:i,start:m-1,reStart:u.length}),u+="!"===s?"(?:(?!":"(?:",this.debug("plType %j %j",s,u),s=!1;continue;case")":if(f||!h.length){u+="\\)";continue}switch(n(),o=!0,u+=")",i=h.pop().type){case"!":u+="[^/]*?)";break;case"?":case"+":case"*":u+=i;case"@":}continue;case"|":if(f||!h.length||c){u+="\\|",c=!1;continue}n(),u+="|";continue;case"[":if(n(),f){u+="\\"+a;continue}f=!0,g=m,p=u.length,u+=a;continue;case"]":if(m===g+1||!f){u+="\\"+a,c=!1;continue}o=!0,f=!1,u+=a;continue;default:n(),c?c=!1:!E[a]||"^"===a&&f||(u+="\\"),u+=a}if(f){var y=t.substr(g+1),x=this.parse(y,$);u=u.substr(0,p)+"\\["+x[0],o=o||x[1]}for(var A;A=h.pop();){var O=u.slice(A.reStart+3);O=O.replace(/((?:\\{2})*)(\\?)\|/g,function(t,e,n){return n||(n="\\"),e+e+n+"|"}),this.debug("tail=%j\n   %s",O,O);var S="*"===A.type?k:"?"===A.type?j:"\\"+A.type;o=!0,u=u.slice(0,A.reStart)+S+"\\("+O}n(),c&&(u+="\\\\");var R=!1;switch(u.charAt(0)){case".":case"[":case"(":R=!0}if(""!==u&&o&&(u="(?=.)"+u),R&&(u=l+u),e===$)return[u,o];if(!o)return b(t);var T=r.nocase?"i":"",C=new RegExp("^"+u+"$",T);return C._glob=t,C._src=u,C}function l(){if(this.regexp||this.regexp===!1)return this.regexp;var t=this.set;if(!t.length)return this.regexp=!1;var e=this.options,n=e.noglobstar?k:e.dot?A:O,r=e.nocase?"i":"",i=t.map(function(t){return t.map(function(t){return t===w?n:"string"==typeof t?m(t):t._src}).join("\\/")}).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{return this.regexp=new RegExp(i,r)}catch(t){return this.regexp=!1}}function d(t,e){if(this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return""===t;if("/"===t&&e)return!0;var n=this.options;"win32"===r&&(t=t.split("\\").join("/")),t=t.split(S),this.debug(this.pattern,"split",t);var i=this.set;this.debug(this.pattern,"set",i);for(var s,a=t.length-1;a>=0&&!(s=t[a]);a--);for(var a=0,u=i.length;a<u;a++){var o=i[a],c=t;n.matchBase&&1===o.length&&(c=[s]);var h=this.matchOne(c,o,e);if(h)return!!n.flipNegate||!this.negate}return!n.flipNegate&&this.negate}function b(t){return t.replace(/\\(.)/g,"$1")}function m(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}n?n.exports=u:e.minimatch=u,t||(t=function(t){switch(t){case"sigmund":return function(t){return JSON.stringify(t)};case"path":return{basename:function(t){t=t.split(/[\/\\]/);var e=t.pop();return e||(e=t.pop()),e}};case"lru-cache":return function(){var t={},e=0;this.set=function(n,r){e++,e>=100&&(t={}),t[n]=r},this.get=function(e){return t[e]}}}}),u.Minimatch=o;var v=t("lru-cache"),y=u.cache=new v({max:100}),w=u.GLOBSTAR=o.GLOBSTAR={},x=t("sigmund"),j=(t("path"),"[^/]"),k=j+"*?",A="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",O="(?:(?!(?:\\/|^)\\.).)*?",E=i("().*{}+?[]^$\\!"),S=/\/+/;u.filter=s,u.defaults=function(t){if(!t||!Object.keys(t).length)return u;var e=u,n=function(n,r,i){return e.minimatch(n,r,a(t,i))};return n.Minimatch=function(n,r){return new e.Minimatch(n,a(t,r))},n},o.defaults=function(t){return t&&Object.keys(t).length?u.defaults(t).Minimatch:o},o.prototype.debug=function(){},o.prototype.make=c,o.prototype.parseNegate=h,u.braceExpand=function(t,e){return new o(t,e).braceExpand()},o.prototype.braceExpand=p,o.prototype.parse=g;var $={};u.makeRe=function(t,e){return new o(t,e||{}).makeRe()},o.prototype.makeRe=l,u.match=function(t,e,n){n=n||{};var r=new o(e,n);return t=t.filter(function(t){return r.match(t)}),r.options.nonull&&!t.length&&t.push(e),t},o.prototype.match=d,o.prototype.matchOne=function(t,e,n){var r=this.options;this.debug("matchOne",{this:this,file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var i=0,s=0,a=t.length,u=e.length;i<a&&s<u;i++,s++){this.debug("matchOne loop");var o=e[s],c=t[i];if(this.debug(e,o,c),o===!1)return!1;if(o===w){this.debug("GLOBSTAR",[e,o,c]);var h=i,f=s+1;if(f===u){for(this.debug("** at the end");i<a;i++)if("."===t[i]||".."===t[i]||!r.dot&&"."===t[i].charAt(0))return!1;return!0}t:for(;h<a;){var p=t[h];if(this.debug("\nglobstar while",t,h,e,f,p),this.matchOne(t.slice(h),e.slice(f),n))return this.debug("globstar found match!",h,a,p),!0;if("."===p||".."===p||!r.dot&&"."===p.charAt(0)){this.debug("dot detected!",t,h,e,f);break t}this.debug("globstar swallow a segment, and continue"),h++}return!(!n||(this.debug("\n>>> no match, partial?",t,h,e,f),h!==a))}var g;if("string"==typeof o?(g=r.nocase?c.toLowerCase()===o.toLowerCase():c===o,this.debug("string match",o,c,g)):(g=c.match(o),this.debug("pattern match",o,c,g)),!g)return!1}if(i===a&&s===u)return!0;if(i===a)return n;if(s===u){var l=i===a-1&&""===t[i];return l}throw new Error("wtf?")}}("function"==typeof require?require:null,this,"object"==typeof module?module:null,"object"==typeof process?process.platform:"win32");
}).call(this,require('_process'))

},{"_process":39}],15:[function(require,module,exports){
(function (Buffer){
function FilerBuffer(r,e,f){return r instanceof ArrayBuffer&&(r=new Uint8Array(r)),new Buffer(r,e,f)}FilerBuffer.prototype=Object.create(Buffer.prototype),FilerBuffer.prototype.constructor=FilerBuffer,Object.keys(Buffer).forEach(function(r){Buffer.hasOwnProperty(r)&&(FilerBuffer[r]=Buffer[r])}),module.exports=FilerBuffer;
}).call(this,require("buffer").Buffer)

},{"buffer":4}],16:[function(require,module,exports){
var O_READ="READ",O_WRITE="WRITE",O_CREATE="CREATE",O_EXCLUSIVE="EXCLUSIVE",O_TRUNCATE="TRUNCATE",O_APPEND="APPEND",XATTR_CREATE="CREATE",XATTR_REPLACE="REPLACE";module.exports={FILE_SYSTEM_NAME:"local",FILE_STORE_NAME:"files",IDB_RO:"readonly",IDB_RW:"readwrite",WSQL_VERSION:"1",WSQL_SIZE:5242880,WSQL_DESC:"FileSystem Storage",MODE_FILE:"FILE",MODE_DIRECTORY:"DIRECTORY",MODE_SYMBOLIC_LINK:"SYMLINK",MODE_META:"META",SYMLOOP_MAX:10,BINARY_MIME_TYPE:"application/octet-stream",JSON_MIME_TYPE:"application/json",ROOT_DIRECTORY_NAME:"/",FS_FORMAT:"FORMAT",FS_NOCTIME:"NOCTIME",FS_NOMTIME:"NOMTIME",FS_NODUPEIDCHECK:"FS_NODUPEIDCHECK",O_READ:O_READ,O_WRITE:O_WRITE,O_CREATE:O_CREATE,O_EXCLUSIVE:O_EXCLUSIVE,O_TRUNCATE:O_TRUNCATE,O_APPEND:O_APPEND,O_FLAGS:{r:[O_READ],"r+":[O_READ,O_WRITE],w:[O_WRITE,O_CREATE,O_TRUNCATE],"w+":[O_WRITE,O_READ,O_CREATE,O_TRUNCATE],wx:[O_WRITE,O_CREATE,O_EXCLUSIVE,O_TRUNCATE],"wx+":[O_WRITE,O_READ,O_CREATE,O_EXCLUSIVE,O_TRUNCATE],a:[O_WRITE,O_CREATE,O_APPEND],"a+":[O_WRITE,O_READ,O_CREATE,O_APPEND],ax:[O_WRITE,O_CREATE,O_EXCLUSIVE,O_APPEND],"ax+":[O_WRITE,O_READ,O_CREATE,O_EXCLUSIVE,O_APPEND]},XATTR_CREATE:XATTR_CREATE,XATTR_REPLACE:XATTR_REPLACE,FS_READY:"READY",FS_PENDING:"PENDING",FS_ERROR:"ERROR",SUPER_NODE_ID:"00000000-0000-0000-0000-000000000000",STDIN:0,STDOUT:1,STDERR:2,FIRST_DESCRIPTOR:3,ENVIRONMENT:{TMP:"/tmp",PATH:""}};
},{}],17:[function(require,module,exports){
var MODE_FILE=require("./constants.js").MODE_FILE;module.exports=function(t,s){this.id=t,this.type=s||MODE_FILE};
},{"./constants.js":16}],18:[function(require,module,exports){
(function (Buffer){
function decode(e){return e.toString("utf8")}function encode(e){return new Buffer(e,"utf8")}module.exports={encode:encode,decode:decode};
}).call(this,require("buffer").Buffer)

},{"buffer":4}],19:[function(require,module,exports){
var errors={};["9:EBADF:bad file descriptor","10:EBUSY:resource busy or locked","18:EINVAL:invalid argument","27:ENOTDIR:not a directory","28:EISDIR:illegal operation on a directory","34:ENOENT:no such file or directory","47:EEXIST:file already exists","50:EPERM:operation not permitted","51:ELOOP:too many symbolic links encountered","53:ENOTEMPTY:directory not empty","55:EIO:i/o error","1000:ENOTMOUNTED:not mounted","1001:EFILESYSTEMERROR:missing super node, use 'FORMAT' flag to format filesystem.","1002:ENOATTR:attribute does not exist"].forEach(function(r){function t(r,t){Error.call(this),this.name=o,this.code=o,this.errno=e,this.message=r||s,t&&(this.path=t),this.stack=new Error(this.message).stack}r=r.split(":");var e=+r[0],o=r[1],s=r[2];t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t.prototype.toString=function(){var r=this.path?", '"+this.path+"'":"";return this.name+": "+this.message+r},errors[o]=errors[e]=t}),module.exports=errors;
},{}],20:[function(require,module,exports){
function update_node_times(e,t,n,i,r){function o(n){e.changes.push({event:"change",path:t}),r(n)}var a=e.flags;_(a).contains(FS_NOCTIME)&&delete i.ctime,_(a).contains(FS_NOMTIME)&&delete i.mtime;var s=!1;i.ctime&&(n.ctime=i.ctime,n.atime=i.ctime,s=!0),i.atime&&(n.atime=i.atime,s=!0),i.mtime&&(n.mtime=i.mtime,s=!0),s?e.putObject(n.id,n,o):o()}function make_node(e,t,n,i){function r(n,r){n?i(n):r.mode!==MODE_DIRECTORY?i(new Errors.ENOTDIR("a component of the path prefix is not a directory",t)):(u=r,find_node(e,t,o))}function o(n,r){!n&&r?i(new Errors.EEXIST("path name already exists",t)):!n||n instanceof Errors.ENOENT?e.getObject(u.data,a):i(n)}function a(t,r){t?i(t):(d=r,Node.create({guid:e.guid,mode:n},function(t,n){return t?void i(t):(c=n,c.nlinks+=1,void e.putObject(c.id,c,f))}))}function s(t){if(t)i(t);else{var n=Date.now();update_node_times(e,E,c,{mtime:n,ctime:n},i)}}function f(t){t?i(t):(d[l]=new DirectoryEntry(c.id,n),e.putObject(u.data,d,s))}if(n!==MODE_DIRECTORY&&n!==MODE_FILE)return i(new Errors.EINVAL("mode must be a directory or file",t));t=normalize(t);var u,d,c,l=basename(t),E=dirname(t);find_node(e,E,r)}function find_node(e,t,n){function i(t,i){t?n(t):i&&i.mode===MODE_META&&i.rnode?e.getObject(i.rnode,r):n(new Errors.EFILESYSTEMERROR)}function r(e,t){e?n(e):t?n(null,t):n(new Errors.ENOENT)}function o(i,r){i?n(i):r.mode===MODE_DIRECTORY&&r.data?e.getObject(r.data,a):n(new Errors.ENOTDIR("a component of the path prefix is not a directory",t))}function a(i,r){if(i)n(i);else if(_(r).has(u)){var o=r[u].id;e.getObject(o,s)}else n(new Errors.ENOENT(null,t))}function s(e,i){e?n(e):i.mode==MODE_SYMBOLIC_LINK?(c++,c>SYMLOOP_MAX?n(new Errors.ELOOP(null,t)):f(i.data)):n(null,i)}function f(t){t=normalize(t),d=dirname(t),u=basename(t),ROOT_DIRECTORY_NAME==u?e.getObject(SUPER_NODE_ID,i):find_node(e,d,o)}if(t=normalize(t),!t)return n(new Errors.ENOENT("path is an empty string"));var u=basename(t),d=dirname(t),c=0;ROOT_DIRECTORY_NAME==u?e.getObject(SUPER_NODE_ID,i):find_node(e,d,o)}function set_extended_attribute(e,t,n,i,r,o,a){function s(i){i?a(i):update_node_times(e,t,n,{ctime:Date.now()},a)}var f=n.xattrs;o===XATTR_CREATE&&f.hasOwnProperty(i)?a(new Errors.EEXIST("attribute already exists",t)):o!==XATTR_REPLACE||f.hasOwnProperty(i)?(f[i]=r,e.putObject(n.id,n,s)):a(new Errors.ENOATTR(null,t))}function ensure_root_directory(e,t){function n(n,r){!n&&r?t():!n||n instanceof Errors.ENOENT?SuperNode.create({guid:e.guid},function(n,r){return n?void t(n):(o=r,void e.putObject(o.id,o,i))}):t(n)}function i(n){n?t(n):Node.create({guid:e.guid,id:o.rnode,mode:MODE_DIRECTORY},function(n,i){return n?void t(n):(a=i,a.nlinks+=1,void e.putObject(a.id,a,r))})}function r(n){n?t(n):(s={},e.putObject(a.data,s,t))}var o,a,s;e.getObject(SUPER_NODE_ID,n)}function make_directory(e,t,n){function i(i,o){!i&&o?n(new Errors.EEXIST(null,t)):!i||i instanceof Errors.ENOENT?find_node(e,_,r):n(i)}function r(t,i){t?n(t):(c=i,e.getObject(c.data,o))}function o(t,i){t?n(t):(l=i,Node.create({guid:e.guid,mode:MODE_DIRECTORY},function(t,i){return t?void n(t):(u=i,u.nlinks+=1,void e.putObject(u.id,u,a))}))}function a(t){t?n(t):(d={},e.putObject(u.data,d,f))}function s(t){if(t)n(t);else{var i=Date.now();update_node_times(e,_,c,{mtime:i,ctime:i},n)}}function f(t){t?n(t):(l[E]=new DirectoryEntry(u.id,MODE_DIRECTORY),e.putObject(c.data,l,s))}t=normalize(t);var u,d,c,l,E=basename(t),_=dirname(t);find_node(e,t,i)}function remove_directory(e,t,n){function i(t,i){t?n(t):(E=i,e.getObject(E.data,r))}function r(i,r){i?n(i):ROOT_DIRECTORY_NAME==O?n(new Errors.EBUSY(null,t)):_(r).has(O)?(m=r,c=m[O].id,e.getObject(c,o)):n(new Errors.ENOENT(null,t))}function o(i,r){i?n(i):r.mode!=MODE_DIRECTORY?n(new Errors.ENOTDIR(null,t)):(c=r,e.getObject(c.data,a))}function a(e,i){e?n(e):(l=i,_(l).size()>0?n(new Errors.ENOTEMPTY(null,t)):f())}function s(t){if(t)n(t);else{var i=Date.now();update_node_times(e,p,E,{mtime:i,ctime:i},u)}}function f(){delete m[O],e.putObject(E.data,m,s)}function u(t){t?n(t):e.delete(c.id,d)}function d(t){t?n(t):e.delete(c.data,n)}t=normalize(t);var c,l,E,m,O=basename(t),p=dirname(t);find_node(e,p,i)}function open_file(e,t,n,i){function r(n,r){n?i(n):r.mode!==MODE_DIRECTORY?i(new Errors.ENOENT(null,t)):(m=r,e.getObject(m.data,o))}function o(r,o){r?i(r):(O=o,_(O).has(h)?_(n).contains(O_EXCLUSIVE)?i(new Errors.ENOENT("O_CREATE and O_EXCLUSIVE are set, and the named file exists",t)):(p=O[h],p.type==MODE_DIRECTORY&&_(n).contains(O_WRITE)?i(new Errors.EISDIR("the named file is a directory and O_WRITE is set",t)):e.getObject(p.id,a)):_(n).contains(O_CREATE)?u():i(new Errors.ENOENT("O_CREATE is not set and the named file does not exist",t)))}function a(e,n){if(e)i(e);else{var r=n;r.mode==MODE_SYMBOLIC_LINK?(T++,T>SYMLOOP_MAX?i(new Errors.ELOOP(null,t)):s(r.data)):f(void 0,r)}}function s(o){o=normalize(o),R=dirname(o),h=basename(o),ROOT_DIRECTORY_NAME==h&&(_(n).contains(O_WRITE)?i(new Errors.EISDIR("the named file is a directory and O_WRITE is set",t)):find_node(e,t,f)),find_node(e,R,r)}function f(e,t){e?i(e):(g=t,i(null,g))}function u(){Node.create({guid:e.guid,mode:MODE_FILE},function(t,n){return t?void i(t):(g=n,g.nlinks+=1,void e.putObject(g.id,g,d))})}function d(t){t?i(t):(w=new Buffer(0),w.fill(0),e.putBuffer(g.data,w,l))}function c(t){if(t)i(t);else{var n=Date.now();update_node_times(e,R,m,{mtime:n,ctime:n},E)}}function l(t){t?i(t):(O[h]=new DirectoryEntry(g.id,MODE_FILE),e.putObject(m.data,O,c))}function E(e){e?i(e):i(null,g)}t=normalize(t);var m,O,p,g,w,h=basename(t),R=dirname(t),T=0;ROOT_DIRECTORY_NAME==h?_(n).contains(O_WRITE)?i(new Errors.EISDIR("the named file is a directory and O_WRITE is set",t)):find_node(e,t,f):find_node(e,R,r)}function replace_data(e,t,n,i,r,o){function a(e){e?o(e):o(null,r)}function s(n){if(n)o(n);else{var i=Date.now();update_node_times(e,t.path,d,{mtime:i,ctime:i},a)}}function f(t){t?o(t):e.putObject(d.id,d,s)}function u(a,s){if(a)o(a);else{d=s;var u=new Buffer(r);u.fill(0),n.copy(u,0,i,i+r),t.position=r,d.size=r,d.version+=1,e.putBuffer(d.data,u,f)}}var d;e.getObject(t.id,u)}function write_data(e,t,n,i,r,o,a){function s(e){e?a(e):a(null,r)}function f(n){if(n)a(n);else{var i=Date.now();update_node_times(e,t.path,l,{mtime:i,ctime:i},s)}}function u(t){t?a(t):e.putObject(l.id,l,f)}function d(s,f){if(s)a(s);else{if(E=f,!E)return a(new Errors.EIO("Expected Buffer"));var d=void 0!==o&&null!==o?o:t.position,c=Math.max(E.length,d+r),_=new Buffer(c);_.fill(0),E&&E.copy(_),n.copy(_,d,i,i+r),void 0===o&&(t.position+=r),l.size=c,l.version+=1,e.putBuffer(l.data,_,u)}}function c(t,n){t?a(t):(l=n,e.getBuffer(l.data,d))}var l,E;e.getObject(t.id,c)}function read_data(e,t,n,i,r,o,a){function s(e,s){if(e)a(e);else{if(d=s,!d)return a(new Errors.EIO("Expected Buffer"));var f=void 0!==o&&null!==o?o:t.position;r=f+r>n.length?r-f:r,d.copy(n,i,f,f+r),void 0===o&&(t.position+=r),a(null,r)}}function f(n,i){n?a(n):"DIRECTORY"===i.mode?a(new Errors.EISDIR("the named file is a directory",t.path)):(u=i,e.getBuffer(u.data,s))}var u,d;e.getObject(t.id,f)}function stat_file(e,t,n){t=normalize(t);basename(t);find_node(e,t,n)}function fstat_file(e,t,n){t.getNode(e,n)}function lstat_file(e,t,n){function i(t,i){t?n(t):(o=i,e.getObject(o.data,r))}function r(i,r){i?n(i):(a=r,_(a).has(s)?e.getObject(a[s].id,n):n(new Errors.ENOENT("a component of the path does not name an existing file",t)))}t=normalize(t);var o,a,s=basename(t),f=dirname(t);ROOT_DIRECTORY_NAME==s?find_node(e,t,n):find_node(e,f,i)}function link_node(e,t,n,i){function r(t){t?i(t):update_node_times(e,n,g,{ctime:Date.now()},i)}function o(t,n){t?i(t):(g=n,g.nlinks+=1,e.putObject(g.id,g,r))}function a(t,n){t?i(t):e.getObject(p[w].id,o)}function s(t,n){t?i(t):(p=n,_(p).has(w)?i(new Errors.EEXIST("newpath resolves to an existing file",w)):(p[w]=m[c],e.putObject(O.data,p,a)))}function f(t,n){t?i(t):(O=n,e.getObject(O.data,s))}function u(t,n){t?i(t):(m=n,_(m).has(c)?"DIRECTORY"===m[c].type?i(new Errors.EPERM("oldpath refers to a directory")):find_node(e,h,f):i(new Errors.ENOENT("a component of either path prefix does not exist",c)))}function d(t,n){t?i(t):(E=n,e.getObject(E.data,u))}t=normalize(t);var c=basename(t),l=dirname(t);n=normalize(n);var E,m,O,p,g,w=basename(n),h=dirname(n);find_node(e,l,d)}function unlink_node(e,t,n){function i(t){t?n(t):(delete d[l],e.putObject(u.data,d,function(t){var i=Date.now();update_node_times(e,E,u,{mtime:i,ctime:i},n)}))}function r(t){t?n(t):e.delete(c.data,i)}function o(o,a){o?n(o):(c=a,c.nlinks-=1,c.nlinks<1?e.delete(c.id,r):e.putObject(c.id,c,function(n){update_node_times(e,t,c,{ctime:Date.now()},i)}))}function a(e,t){e?n(e):"DIRECTORY"===t.mode?n(new Errors.EPERM("unlink not permitted on directories",l)):o(null,t)}function s(t,i){t?n(t):(d=i,_(d).has(l)?e.getObject(d[l].id,a):n(new Errors.ENOENT("a component of the path does not name an existing file",l)))}function f(t,i){t?n(t):(u=i,e.getObject(u.data,s))}t=normalize(t);var u,d,c,l=basename(t),E=dirname(t);find_node(e,E,f)}function read_directory(e,t,n){function i(e,t){if(e)n(e);else{a=t;var i=Object.keys(a);n(null,i)}}function r(r,a){r?n(r):a.mode!==MODE_DIRECTORY?n(new Errors.ENOTDIR(null,t)):(o=a,e.getObject(o.data,i))}t=normalize(t);var o,a;basename(t);find_node(e,t,r)}function make_symbolic_link(e,t,n,i){function r(t,n){t?i(t):(u=n,e.getObject(u.data,o))}function o(e,t){e?i(e):(d=t,_(d).has(l)?i(new Errors.EEXIST(null,l)):a())}function a(){Node.create({guid:e.guid,mode:MODE_SYMBOLIC_LINK},function(n,r){return n?void i(n):(c=r,c.nlinks+=1,c.size=t.length,c.data=t,void e.putObject(c.id,c,f))})}function s(t){if(t)i(t);else{var n=Date.now();update_node_times(e,E,u,{mtime:n,ctime:n},i)}}function f(t){t?i(t):(d[l]=new DirectoryEntry(c.id,MODE_SYMBOLIC_LINK),e.putObject(u.data,d,s))}n=normalize(n);var u,d,c,l=basename(n),E=dirname(n);ROOT_DIRECTORY_NAME==l?i(new Errors.EEXIST(null,l)):find_node(e,E,r)}function read_link(e,t,n){function i(t,i){t?n(t):(a=i,e.getObject(a.data,r))}function r(t,i){t?n(t):(s=i,_(s).has(f)?e.getObject(s[f].id,o):n(new Errors.ENOENT("a component of the path does not name an existing file",f)))}function o(e,i){e?n(e):i.mode!=MODE_SYMBOLIC_LINK?n(new Errors.EINVAL("path not a symbolic link",t)):n(null,i.data)}t=normalize(t);var a,s,f=basename(t),u=dirname(t);find_node(e,u,i)}function truncate_file(e,t,n,i){function r(n,r){n?i(n):r.mode==MODE_DIRECTORY?i(new Errors.EISDIR(null,t)):(f=r,e.getBuffer(f.data,o))}function o(t,r){if(t)i(t);else{if(!r)return i(new Errors.EIO("Expected Buffer"));var o=new Buffer(n);o.fill(0),r&&r.copy(o),e.putBuffer(f.data,o,s)}}function a(n){if(n)i(n);else{var r=Date.now();update_node_times(e,t,f,{mtime:r,ctime:r},i)}}function s(t){t?i(t):(f.size=n,f.version+=1,e.putObject(f.id,f,a))}t=normalize(t);var f;n<0?i(new Errors.EINVAL("length cannot be negative")):find_node(e,t,r)}function ftruncate_file(e,t,n,i){function r(t,n){t?i(t):n.mode==MODE_DIRECTORY?i(new Errors.EISDIR):(f=n,e.getBuffer(f.data,o))}function o(t,r){if(t)i(t);else{var o;if(!r)return i(new Errors.EIO("Expected Buffer"));r?o=r.slice(0,n):(o=new Buffer(n),o.fill(0)),e.putBuffer(f.data,o,s)}}function a(n){if(n)i(n);else{var r=Date.now();update_node_times(e,t.path,f,{mtime:r,ctime:r},i)}}function s(t){t?i(t):(f.size=n,f.version+=1,e.putObject(f.id,f,a))}var f;n<0?i(new Errors.EINVAL("length cannot be negative")):t.getNode(e,r)}function utimes_file(e,t,n,i,r){function o(o,a){o?r(o):update_node_times(e,t,a,{atime:n,ctime:i,mtime:i},r)}t=normalize(t),"number"!=typeof n||"number"!=typeof i?r(new Errors.EINVAL("atime and mtime must be number",t)):n<0||i<0?r(new Errors.EINVAL("atime and mtime must be positive integers",t)):find_node(e,t,o)}function futimes_file(e,t,n,i,r){function o(o,a){o?r(o):update_node_times(e,t.path,a,{atime:n,ctime:i,mtime:i},r)}"number"!=typeof n||"number"!=typeof i?r(new Errors.EINVAL("atime and mtime must be a number")):n<0||i<0?r(new Errors.EINVAL("atime and mtime must be positive integers")):t.getNode(e,o)}function setxattr_file(e,t,n,i,r,o){function a(a,s){return a?o(a):void set_extended_attribute(e,t,s,n,i,r,o)}t=normalize(t),"string"!=typeof n?o(new Errors.EINVAL("attribute name must be a string",t)):n?null!==r&&r!==XATTR_CREATE&&r!==XATTR_REPLACE?o(new Errors.EINVAL("invalid flag, must be null, XATTR_CREATE or XATTR_REPLACE",t)):find_node(e,t,a):o(new Errors.EINVAL("attribute name cannot be an empty string",t))}function fsetxattr_file(e,t,n,i,r,o){function a(a,s){return a?o(a):void set_extended_attribute(e,t.path,s,n,i,r,o)}"string"!=typeof n?o(new Errors.EINVAL("attribute name must be a string")):n?null!==r&&r!==XATTR_CREATE&&r!==XATTR_REPLACE?o(new Errors.EINVAL("invalid flag, must be null, XATTR_CREATE or XATTR_REPLACE")):t.getNode(e,a):o(new Errors.EINVAL("attribute name cannot be an empty string"))}function getxattr_file(e,t,n,i){function r(e,r){if(e)return i(e);var o=r.xattrs;o.hasOwnProperty(n)?i(null,o[n]):i(new Errors.ENOATTR(null,t))}t=normalize(t),"string"!=typeof n?i(new Errors.EINVAL("attribute name must be a string",t)):n?find_node(e,t,r):i(new Errors.EINVAL("attribute name cannot be an empty string",t))}function fgetxattr_file(e,t,n,i){function r(e,t){if(e)return i(e);var r=t.xattrs;r.hasOwnProperty(n)?i(null,r[n]):i(new Errors.ENOATTR)}"string"!=typeof n?i(new Errors.EINVAL):n?t.getNode(e,r):i(new Errors.EINVAL("attribute name cannot be an empty string"))}function removexattr_file(e,t,n,i){function r(r,o){function a(n){n?i(n):update_node_times(e,t,o,{ctime:Date.now()},i)}if(r)return i(r);var s=o.xattrs;s.hasOwnProperty(n)?(delete s[n],e.putObject(o.id,o,a)):i(new Errors.ENOATTR(null,t))}t=normalize(t),"string"!=typeof n?i(new Errors.EINVAL("attribute name must be a string",t)):n?find_node(e,t,r):i(new Errors.EINVAL("attribute name cannot be an empty string",t))}function fremovexattr_file(e,t,n,i){function r(r,o){function a(n){n?i(n):update_node_times(e,t.path,o,{ctime:Date.now()},i)}if(r)return i(r);var s=o.xattrs;s.hasOwnProperty(n)?(delete s[n],e.putObject(o.id,o,a)):i(new Errors.ENOATTR)}"string"!=typeof n?i(new Errors.EINVAL("attribute name must be a string")):n?t.getNode(e,r):i(new Errors.EINVAL("attribute name cannot be an empty string"))}function validate_flags(e){return _(O_FLAGS).has(e)?O_FLAGS[e]:null}function validate_file_options(e,t,n){return e?"function"==typeof e?e={encoding:t,flag:n}:"string"==typeof e&&(e={encoding:e,flag:n}):e={encoding:t,flag:n},e}function pathCheck(e,t){var n;return e?isNullPath(e)?n=new Errors.EINVAL("Path must be a string without null bytes.",e):isAbsolutePath(e)||(n=new Errors.EINVAL("Path must be absolute.",e)):n=new Errors.EINVAL("Path must be a string",e),!n||(t(n),!1)}function open(e,t,n,i,r,o){function a(t,r){if(t)o(t);else{var a;a=_(i).contains(O_APPEND)?r.size:0;var s=new OpenFileDescription(n,r.id,i,a),f=e.allocDescriptor(s);o(null,f)}}o=arguments[arguments.length-1],pathCheck(n,o)&&(i=validate_flags(i),i||o(new Errors.EINVAL("flags is not valid"),n),open_file(t,n,i,a))}function close(e,t,n,i){_(e.openFiles).has(n)?(e.releaseDescriptor(n),i(null)):i(new Errors.EBADF)}function mknod(e,t,n,i,r){pathCheck(n,r)&&make_node(t,n,i,r)}function mkdir(e,t,n,i,r){r=arguments[arguments.length-1],pathCheck(n,r)&&make_directory(t,n,r)}function rmdir(e,t,n,i){pathCheck(n,i)&&remove_directory(t,n,i)}function stat(e,t,n,i){function r(t,n){if(t)i(t);else{var r=new Stats(n,e.name);i(null,r)}}pathCheck(n,i)&&stat_file(t,n,r)}function fstat(e,t,n,i){function r(t,n){if(t)i(t);else{var r=new Stats(n,e.name);i(null,r)}}var o=e.openFiles[n];o?fstat_file(t,o,r):i(new Errors.EBADF)}function link(e,t,n,i,r){pathCheck(n,r)&&pathCheck(i,r)&&link_node(t,n,i,r)}function unlink(e,t,n,i){pathCheck(n,i)&&unlink_node(t,n,i)}function read(e,t,n,i,r,o,a,s){function f(e,t){s(e,t||0,i)}r=void 0===r?0:r,o=void 0===o?i.length-r:o,s=arguments[arguments.length-1];var u=e.openFiles[n];u?_(u.flags).contains(O_READ)?read_data(t,u,i,r,o,a,f):s(new Errors.EBADF("descriptor does not permit reading")):s(new Errors.EBADF)}function readFile(e,t,n,i,r){if(r=arguments[arguments.length-1],i=validate_file_options(i,null,"r"),pathCheck(n,r)){var o=validate_flags(i.flag||"r");return o?void open_file(t,n,o,function(a,s){function f(){e.releaseDescriptor(d)}if(a)return r(a);var u=new OpenFileDescription(n,s.id,o,0),d=e.allocDescriptor(u);fstat_file(t,u,function(o,a){if(o)return f(),r(o);var s=new Stats(a,e.name);if(s.isDirectory())return f(),r(new Errors.EISDIR("illegal operation on directory",n));var d=s.size,c=new Buffer(d);c.fill(0),read_data(t,u,c,0,d,0,function(e,t){if(f(),e)return r(e);var n;n="utf8"===i.encoding?Encoding.decode(c):c,r(null,n)})})}):r(new Errors.EINVAL("flags is not valid",n))}}function write(e,t,n,i,r,o,a,s){s=arguments[arguments.length-1],r=void 0===r?0:r,o=void 0===o?i.length-r:o;var f=e.openFiles[n];f?_(f.flags).contains(O_WRITE)?i.length-r<o?s(new Errors.EIO("intput buffer is too small")):write_data(t,f,i,r,o,a,s):s(new Errors.EBADF("descriptor does not permit writing")):s(new Errors.EBADF)}function writeFile(e,t,n,i,r,o){if(o=arguments[arguments.length-1],r=validate_file_options(r,"utf8","w"),pathCheck(n,o)){var a=validate_flags(r.flag||"w");if(!a)return o(new Errors.EINVAL("flags is not valid",n));i=i||"","number"==typeof i&&(i=""+i),"string"==typeof i&&"utf8"===r.encoding&&(i=Encoding.encode(i)),open_file(t,n,a,function(r,s){if(r)return o(r);var f=new OpenFileDescription(n,s.id,a,0),u=e.allocDescriptor(f);replace_data(t,f,i,0,i.length,function(t,n){return e.releaseDescriptor(u),t?o(t):void o(null)})})}}function appendFile(e,t,n,i,r,o){if(o=arguments[arguments.length-1],r=validate_file_options(r,"utf8","a"),pathCheck(n,o)){var a=validate_flags(r.flag||"a");if(!a)return o(new Errors.EINVAL("flags is not valid",n));i=i||"","number"==typeof i&&(i=""+i),"string"==typeof i&&"utf8"===r.encoding&&(i=Encoding.encode(i)),open_file(t,n,a,function(r,s){if(r)return o(r);var f=new OpenFileDescription(n,s.id,a,s.size),u=e.allocDescriptor(f);write_data(t,f,i,0,i.length,f.position,function(t,n){return e.releaseDescriptor(u),t?o(t):void o(null)})})}}function exists(e,t,n,i){function r(e,t){i(!e)}stat(e,t,n,r)}function getxattr(e,t,n,i,r){pathCheck(n,r)&&getxattr_file(t,n,i,r)}function fgetxattr(e,t,n,i,r){var o=e.openFiles[n];o?fgetxattr_file(t,o,i,r):r(new Errors.EBADF)}function setxattr(e,t,n,i,r,o,a){"function"==typeof o&&(a=o,o=null),pathCheck(n,a)&&setxattr_file(t,n,i,r,o,a)}function fsetxattr(e,t,n,i,r,o,a){"function"==typeof o&&(a=o,o=null);var s=e.openFiles[n];s?_(s.flags).contains(O_WRITE)?fsetxattr_file(t,s,i,r,o,a):a(new Errors.EBADF("descriptor does not permit writing")):a(new Errors.EBADF)}function removexattr(e,t,n,i,r){pathCheck(n,r)&&removexattr_file(t,n,i,r)}function fremovexattr(e,t,n,i,r){var o=e.openFiles[n];o?_(o.flags).contains(O_WRITE)?fremovexattr_file(t,o,i,r):r(new Errors.EBADF("descriptor does not permit writing")):r(new Errors.EBADF)}function lseek(e,t,n,i,r,o){function a(e,t){e?o(e):t.size+i<0?o(new Errors.EINVAL("resulting file offset would be negative")):(s.position=t.size+i,o(null,s.position))}var s=e.openFiles[n];s||o(new Errors.EBADF),"SET"===r?i<0?o(new Errors.EINVAL("resulting file offset would be negative")):(s.position=i,o(null,s.position)):"CUR"===r?s.position+i<0?o(new Errors.EINVAL("resulting file offset would be negative")):(s.position+=i,o(null,s.position)):"END"===r?fstat_file(t,s,a):o(new Errors.EINVAL("whence argument is not a proper value"))}function readdir(e,t,n,i){pathCheck(n,i)&&read_directory(t,n,i)}function utimes(e,t,n,i,r,o){if(pathCheck(n,o)){var a=Date.now();i=i?i:a,r=r?r:a,utimes_file(t,n,i,r,o)}}function futimes(e,t,n,i,r,o){var a=Date.now();i=i?i:a,r=r?r:a;var s=e.openFiles[n];s?_(s.flags).contains(O_WRITE)?futimes_file(t,s,i,r,o):o(new Errors.EBADF("descriptor does not permit writing")):o(new Errors.EBADF)}function rename(e,t,n,i,r){function o(e,n){e?r(e):update_node_times(t,i,n,{ctime:Date.now()},r)}function a(e){e?r(e):t.getObject(w[v].id,o)}function s(e){e?r(e):(O.id===g.id&&(p=w),delete p[T],t.putObject(O.data,p,a))}function f(e){e?r(e):(w[v]=p[T],t.putObject(g.data,w,s))}function u(e,n){e?r(e):(w=n,_(w).has(v)?remove_directory(t,i,f):f())}function d(e,n){e?r(e):(g=n,t.getObject(g.data,u))}function c(e,n){e?r(e):(p=n,find_node(t,R,d))}function l(e,n){e?r(e):(O=n,t.getObject(n.data,c))}function E(e){e?r(e):unlink_node(t,n,r)}function m(e,o){e?r(e):"DIRECTORY"===o.mode?find_node(t,h,l):link_node(t,n,i,E)}if(pathCheck(n,r)&&pathCheck(i,r)){n=normalize(n),i=normalize(i);var O,p,g,w,h=Path.dirname(n),R=Path.dirname(n),T=Path.basename(n),v=Path.basename(i);find_node(t,n,m)}}function symlink(e,t,n,i,r,o){o=arguments[arguments.length-1],pathCheck(n,o)&&pathCheck(i,o)&&make_symbolic_link(t,n,i,o)}function readlink(e,t,n,i){pathCheck(n,i)&&read_link(t,n,i)}function lstat(e,t,n,i){function r(t,n){if(t)i(t);else{var r=new Stats(n,e.name);i(null,r)}}pathCheck(n,i)&&lstat_file(t,n,r)}function truncate(e,t,n,i,r){r=arguments[arguments.length-1],i=i||0,pathCheck(n,r)&&truncate_file(t,n,i,r)}function ftruncate(e,t,n,i,r){r=arguments[arguments.length-1],i=i||0;var o=e.openFiles[n];o?_(o.flags).contains(O_WRITE)?ftruncate_file(t,o,i,r):r(new Errors.EBADF("descriptor does not permit writing")):r(new Errors.EBADF)}var _=require("../../lib/nodash.js"),Path=require("../path.js"),normalize=Path.normalize,dirname=Path.dirname,basename=Path.basename,isAbsolutePath=Path.isAbsolute,isNullPath=Path.isNull,Constants=require("../constants.js"),MODE_FILE=Constants.MODE_FILE,MODE_DIRECTORY=Constants.MODE_DIRECTORY,MODE_SYMBOLIC_LINK=Constants.MODE_SYMBOLIC_LINK,MODE_META=Constants.MODE_META,ROOT_DIRECTORY_NAME=Constants.ROOT_DIRECTORY_NAME,SUPER_NODE_ID=Constants.SUPER_NODE_ID,SYMLOOP_MAX=Constants.SYMLOOP_MAX,O_READ=Constants.O_READ,O_WRITE=Constants.O_WRITE,O_CREATE=Constants.O_CREATE,O_EXCLUSIVE=Constants.O_EXCLUSIVE,O_TRUNCATE=Constants.O_TRUNCATE,O_APPEND=Constants.O_APPEND,O_FLAGS=Constants.O_FLAGS,XATTR_CREATE=Constants.XATTR_CREATE,XATTR_REPLACE=Constants.XATTR_REPLACE,FS_NOMTIME=Constants.FS_NOMTIME,FS_NOCTIME=Constants.FS_NOCTIME,Encoding=require("../encoding.js"),Errors=require("../errors.js"),DirectoryEntry=require("../directory-entry.js"),OpenFileDescription=require("../open-file-description.js"),SuperNode=require("../super-node.js"),Node=require("../node.js"),Stats=require("../stats.js"),Buffer=require("../buffer.js");module.exports={ensureRootDirectory:ensure_root_directory,open:open,close:close,mknod:mknod,mkdir:mkdir,rmdir:rmdir,unlink:unlink,stat:stat,fstat:fstat,link:link,read:read,readFile:readFile,write:write,writeFile:writeFile,appendFile:appendFile,exists:exists,getxattr:getxattr,fgetxattr:fgetxattr,setxattr:setxattr,fsetxattr:fsetxattr,removexattr:removexattr,fremovexattr:fremovexattr,lseek:lseek,readdir:readdir,utimes:utimes,futimes:futimes,rename:rename,symlink:symlink,readlink:readlink,lstat:lstat,truncate:truncate,ftruncate:ftruncate};
},{"../../lib/nodash.js":13,"../buffer.js":15,"../constants.js":16,"../directory-entry.js":17,"../encoding.js":18,"../errors.js":19,"../node.js":24,"../open-file-description.js":25,"../path.js":26,"../stats.js":34,"../super-node.js":35}],21:[function(require,module,exports){
function maybeCallback(e){return"function"==typeof e?e:function(e){if(e)throw e}}function defaultCallback(e){e&&console.error("Filer error: ",e)}function FileSystem(e,t){function n(){S.forEach(function(e){e.call(this)}.bind(c)),S=null}function r(e){return function(t){function n(t){var r=a();e.getObject(r,function(e,i){return e?void t(e):void(i?n(t):t(null,r))})}return _(o).contains(FS_NODUPEIDCHECK)?void t(null,a()):void n(t)}}function i(e){if(e.length){var t=Intercom.getInstance();e.forEach(function(e){t.emit(e.event,e.path)})}}e=e||{},t=t||defaultCallback;var o=e.flags,a=e.guid?e.guid:defaultGuidFn,s=e.provider||new providers.Default(e.name||FILE_SYSTEM_NAME),u=e.name||s.name,l=_(o).contains(FS_FORMAT),c=this;c.readyState=FS_PENDING,c.name=u,c.error=null,c.stdin=STDIN,c.stdout=STDOUT,c.stderr=STDERR,this.Shell=Shell.bind(void 0,this);var d={},f=FIRST_DESCRIPTOR;Object.defineProperty(this,"openFiles",{get:function(){return d}}),this.allocDescriptor=function(e){var t=f++;return d[t]=e,t},this.releaseDescriptor=function(e){delete d[e]};var S=[];this.queueOrRun=function(e){var t;return FS_READY==c.readyState?e.call(c):FS_ERROR==c.readyState?t=new Errors.EFILESYSTEMERROR("unknown error"):S.push(e),t},this.watch=function(e,t,n){if(isNullPath(e))throw new Error("Path must be a string without null bytes.");"function"==typeof t&&(n=t,t={}),t=t||{},n=n||nop;var r=new FSWatcher;return r.start(e,!1,t.recursive),r.on("change",n),r},s.open(function(e){function a(e){function a(e){var t=s[e]();return t.flags=o,t.changes=[],t.guid=r(t),t.close=function(){var e=t.changes;i(e),e.length=0},t}c.provider={openReadWriteContext:function(){return a("getReadWriteContext")},openReadOnlyContext:function(){return a("getReadOnlyContext")}},e?c.readyState=FS_ERROR:c.readyState=FS_READY,n(),t(e,c)}if(e)return a(e);var u=s.getReadWriteContext();u.guid=r(u),l?u.clear(function(e){return e?a(e):void impl.ensureRootDirectory(u,a)}):impl.ensureRootDirectory(u,a)})}var _=require("../../lib/nodash.js"),isNullPath=require("../path.js").isNull,nop=require("../shared.js").nop,Constants=require("../constants.js"),FILE_SYSTEM_NAME=Constants.FILE_SYSTEM_NAME,FS_FORMAT=Constants.FS_FORMAT,FS_READY=Constants.FS_READY,FS_PENDING=Constants.FS_PENDING,FS_ERROR=Constants.FS_ERROR,FS_NODUPEIDCHECK=Constants.FS_NODUPEIDCHECK,providers=require("../providers/index.js"),Shell=require("../shell/shell.js"),Intercom=require("../../lib/intercom.js"),FSWatcher=require("../fs-watcher.js"),Errors=require("../errors.js"),defaultGuidFn=require("../shared.js").guid,STDIN=Constants.STDIN,STDOUT=Constants.STDOUT,STDERR=Constants.STDERR,FIRST_DESCRIPTOR=Constants.FIRST_DESCRIPTOR,impl=require("./implementation.js");FileSystem.providers=providers,["open","close","mknod","mkdir","rmdir","stat","fstat","link","unlink","read","readFile","write","writeFile","appendFile","exists","lseek","readdir","rename","readlink","symlink","lstat","truncate","ftruncate","utimes","futimes","setxattr","getxattr","fsetxattr","fgetxattr","removexattr","fremovexattr"].forEach(function(e){FileSystem.prototype[e]=function(){var t=this,n=Array.prototype.slice.call(arguments,0),r=n.length-1,i="function"!=typeof n[r],o=maybeCallback(n[r]),a=t.queueOrRun(function(){function a(){s.close(),o.apply(t,arguments)}var s=t.provider.openReadWriteContext();if(FS_ERROR===t.readyState){var u=new Errors.EFILESYSTEMERROR("filesystem unavailable, operation canceled");return o.call(t,u)}i?n.push(a):n[r]=a;var l=[t,s].concat(n);impl[e].apply(null,l)});a&&o(a)}}),module.exports=FileSystem;
},{"../../lib/intercom.js":12,"../../lib/nodash.js":13,"../constants.js":16,"../errors.js":19,"../fs-watcher.js":22,"../path.js":26,"../providers/index.js":27,"../shared.js":31,"../shell/shell.js":33,"./implementation.js":20}],22:[function(require,module,exports){
function FSWatcher(){function t(t){(r===t||a&&0===t.indexOf(e))&&n.trigger("change","change",t)}EventEmitter.call(this);var e,r,n=this,a=!1;n.start=function(n,i,c){if(!r){if(Path.isNull(n))throw new Error("Path must be a string without null bytes.");r=Path.normalize(n),a=c===!0,a&&(e="/"===r?"/":r+"/");var o=Intercom.getInstance();o.on("change",t)}},n.close=function(){var e=Intercom.getInstance();e.off("change",t),n.removeAllListeners("change")}}var EventEmitter=require("../lib/eventemitter.js"),Path=require("./path.js"),Intercom=require("../lib/intercom.js");FSWatcher.prototype=new EventEmitter,FSWatcher.prototype.constructor=FSWatcher,module.exports=FSWatcher;
},{"../lib/eventemitter.js":11,"../lib/intercom.js":12,"./path.js":26}],23:[function(require,module,exports){
module.exports={FileSystem:require("./filesystem/interface.js"),Buffer:require("./buffer.js"),Path:require("./path.js"),Errors:require("./errors.js"),Shell:require("./shell/shell.js")};
},{"./buffer.js":15,"./errors.js":19,"./filesystem/interface.js":21,"./path.js":26,"./shell/shell.js":33}],24:[function(require,module,exports){
function Node(i){var t=Date.now();this.id=i.id,this.mode=i.mode||MODE_FILE,this.size=i.size||0,this.atime=i.atime||t,this.ctime=i.ctime||t,this.mtime=i.mtime||t,this.flags=i.flags||[],this.xattrs=i.xattrs||{},this.nlinks=i.nlinks||0,this.version=i.version||0,this.blksize=void 0,this.nblocks=1,this.data=i.data}function ensureID(i,t,e){i[t]?e(null):i.guid(function(s,n){i[t]=n,e(s)})}var MODE_FILE=require("./constants.js").MODE_FILE;Node.create=function(i,t){ensureID(i,"id",function(e){return e?void t(e):void ensureID(i,"data",function(e){return e?void t(e):void t(null,new Node(i))})})},module.exports=Node;
},{"./constants.js":16}],25:[function(require,module,exports){
function OpenFileDescription(e,i,r,t){this.path=e,this.id=i,this.flags=r,this.position=t}var Errors=require("./errors.js");OpenFileDescription.prototype.getNode=function(e,i){function r(e,r){return e?i(e):r?void i(null,r):i(new Errors.EBADF("file descriptor refers to unknown node",o))}var t=this.id,o=this.path;e.getObject(t,r)},module.exports=OpenFileDescription;
},{"./errors.js":19}],26:[function(require,module,exports){
function normalizeArray(r,e){for(var n=0,t=r.length-1;t>=0;t--){var i=r[t];"."===i?r.splice(t,1):".."===i?(r.splice(t,1),n++):n&&(r.splice(t,1),n--)}if(e)for(;n--;n)r.unshift("..");return r}function resolve(){for(var r="",e=!1,n=arguments.length-1;n>=-1&&!e;n--){var t=n>=0?arguments[n]:"/";"string"==typeof t&&t&&(r=t+"/"+r,e="/"===t.charAt(0))}return r=normalizeArray(r.split("/").filter(function(r){return!!r}),!e).join("/"),(e?"/":"")+r||"."}function normalize(r){var e="/"===r.charAt(0);"/"===r.substr(-1);return r=normalizeArray(r.split("/").filter(function(r){return!!r}),!e).join("/"),r||e||(r="."),(e?"/":"")+r}function join(){var r=Array.prototype.slice.call(arguments,0);return normalize(r.filter(function(r,e){return r&&"string"==typeof r}).join("/"))}function relative(r,e){function n(r){for(var e=0;e<r.length&&""===r[e];e++);for(var n=r.length-1;n>=0&&""===r[n];n--);return e>n?[]:r.slice(e,n-e+1)}r=resolve(r).substr(1),e=resolve(e).substr(1);for(var t=n(r.split("/")),i=n(e.split("/")),l=Math.min(t.length,i.length),a=l,o=0;o<l;o++)if(t[o]!==i[o]){a=o;break}for(var s=[],o=a;o<t.length;o++)s.push("..");return s=s.concat(i.slice(a)),s.join("/")}function dirname(r){var e=splitPath(r),n=e[0],t=e[1];return n||t?(t&&(t=t.substr(0,t.length-1)),n+t):"."}function basename(r,e){var n=splitPath(r)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),""===n?"/":n}function extname(r){return splitPath(r)[3]}function isAbsolute(r){return"/"===r.charAt(0)}function isNull(r){return(""+r).indexOf("\0")!==-1}function addTrailing(r){return r.replace(/\/*$/,"/")}function removeTrailing(r){return r=r.replace(/\/*$/,""),""===r?"/":r}var splitPathRe=/^(\/?)([\s\S]+\/(?!$)|\/)?((?:\.{1,2}$|[\s\S]+?)?(\.[^.\/]*)?)$/,splitPath=function(r){var e=splitPathRe.exec(r);return[e[1]||"",e[2]||"",e[3]||"",e[4]||""]};module.exports={normalize:normalize,resolve:resolve,join:join,relative:relative,sep:"/",delimiter:":",dirname:dirname,basename:basename,extname:extname,isAbsolute:isAbsolute,isNull:isNull,addTrailing:addTrailing,removeTrailing:removeTrailing};
},{}],27:[function(require,module,exports){
var IndexedDB=require("./indexeddb.js"),WebSQL=require("./websql.js"),Memory=require("./memory.js");module.exports={IndexedDB:IndexedDB,WebSQL:WebSQL,Memory:Memory,Default:IndexedDB,Fallback:function(){function e(){throw"[Filer Error] Your browser doesn't support IndexedDB or WebSQL."}return IndexedDB.isSupported()?IndexedDB:WebSQL.isSupported()?WebSQL:(e.isSupported=function(){return!1},e)}()};
},{"./indexeddb.js":28,"./memory.js":29,"./websql.js":30}],28:[function(require,module,exports){
(function (global,Buffer){
function IndexedDBContext(e,t){var n=e.transaction(FILE_STORE_NAME,t);this.objectStore=n.objectStore(FILE_STORE_NAME)}function _get(e,t,n){try{var r=e.get(t);r.onsuccess=function(e){var t=e.target.result;n(null,t)},r.onerror=function(e){n(e)}}catch(e){n(e)}}function _put(e,t,n,r){try{var o=e.put(n,t);o.onsuccess=function(e){var t=e.target.result;r(null,t)},o.onerror=function(e){r(e)}}catch(e){r(e)}}function IndexedDB(e){this.name=e||FILE_SYSTEM_NAME,this.db=null}var FILE_SYSTEM_NAME=require("../constants.js").FILE_SYSTEM_NAME,FILE_STORE_NAME=require("../constants.js").FILE_STORE_NAME,IDB_RW=require("../constants.js").IDB_RW,IDB_RO=require("../constants.js").IDB_RO,Errors=require("../errors.js"),FilerBuffer=require("../buffer.js"),indexedDB=global.indexedDB||global.mozIndexedDB||global.webkitIndexedDB||global.msIndexedDB;IndexedDBContext.prototype.clear=function(e){try{var t=this.objectStore.clear();t.onsuccess=function(t){e()},t.onerror=function(t){e(t)}}catch(t){e(t)}},IndexedDBContext.prototype.getObject=function(e,t){_get(this.objectStore,e,t)},IndexedDBContext.prototype.getBuffer=function(e,t){_get(this.objectStore,e,function(e,n){return e?t(e):void t(null,new FilerBuffer(n))})},IndexedDBContext.prototype.putObject=function(e,t,n){_put(this.objectStore,e,t,n)},IndexedDBContext.prototype.putBuffer=function(e,t,n){var r;r=Buffer._useTypedArrays?t.buffer:t.toArrayBuffer(),_put(this.objectStore,e,r,n)},IndexedDBContext.prototype.delete=function(e,t){try{var n=this.objectStore.delete(e);n.onsuccess=function(e){var n=e.target.result;t(null,n)},n.onerror=function(e){t(e)}}catch(e){t(e)}},IndexedDB.isSupported=function(){return!!indexedDB},IndexedDB.prototype.open=function(e){var t=this;if(t.db)return e();var n=indexedDB.open(t.name);n.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains(FILE_STORE_NAME)&&t.deleteObjectStore(FILE_STORE_NAME),t.createObjectStore(FILE_STORE_NAME)},n.onsuccess=function(n){t.db=n.target.result,e()},n.onerror=function(t){e(new Errors.EINVAL("IndexedDB cannot be accessed. If private browsing is enabled, disable it."))}},IndexedDB.prototype.getReadOnlyContext=function(){return new IndexedDBContext(this.db,IDB_RW)},IndexedDB.prototype.getReadWriteContext=function(){return new IndexedDBContext(this.db,IDB_RW)},module.exports=IndexedDB;
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer)

},{"../buffer.js":15,"../constants.js":16,"../errors.js":19,"buffer":4}],29:[function(require,module,exports){
function MemoryContext(t,e){this.readOnly=e,this.objectStore=t}function Memory(t){this.name=t||FILE_SYSTEM_NAME}var FILE_SYSTEM_NAME=require("../constants.js").FILE_SYSTEM_NAME,asyncCallback=require("../../lib/async.js").setImmediate,createDB=function(){var t={};return function(e){return t.hasOwnProperty(e)||(t[e]={}),t[e]}}();MemoryContext.prototype.clear=function(t){if(this.readOnly)return void asyncCallback(function(){t("[MemoryContext] Error: write operation on read only context")});var e=this.objectStore;Object.keys(e).forEach(function(t){delete e[t]}),asyncCallback(t)},MemoryContext.prototype.getObject=MemoryContext.prototype.getBuffer=function(t,e){var o=this;asyncCallback(function(){e(null,o.objectStore[t])})},MemoryContext.prototype.putObject=MemoryContext.prototype.putBuffer=function(t,e,o){return this.readOnly?void asyncCallback(function(){o("[MemoryContext] Error: write operation on read only context")}):(this.objectStore[t]=e,void asyncCallback(o))},MemoryContext.prototype.delete=function(t,e){return this.readOnly?void asyncCallback(function(){e("[MemoryContext] Error: write operation on read only context")}):(delete this.objectStore[t],void asyncCallback(e))},Memory.isSupported=function(){return!0},Memory.prototype.open=function(t){this.db=createDB(this.name),asyncCallback(t)},Memory.prototype.getReadOnlyContext=function(){return new MemoryContext(this.db,!0)},Memory.prototype.getReadWriteContext=function(){return new MemoryContext(this.db,!1)},module.exports=Memory;
},{"../../lib/async.js":10,"../constants.js":16}],30:[function(require,module,exports){
(function (global){
function WebSQLContext(t,e){var n=this;this.getTransaction=function(o){return n.transaction?void o(n.transaction):void t[e?"readTransaction":"transaction"](function(t){n.transaction=t,o(t)})}}function _get(t,e,n){function o(t,e){var o=0===e.rows.length?null:e.rows.item(0).data;n(null,o)}function r(t,e){n(e)}t(function(t){t.executeSql("SELECT data FROM "+FILE_STORE_NAME+" WHERE id = ? LIMIT 1;",[e],o,r)})}function _put(t,e,n,o){function r(t,e){o(null)}function i(t,e){o(e)}t(function(t){t.executeSql("INSERT OR REPLACE INTO "+FILE_STORE_NAME+" (id, data) VALUES (?, ?);",[e,n],r,i)})}function WebSQL(t){this.name=t||FILE_SYSTEM_NAME,this.db=null}var FILE_SYSTEM_NAME=require("../constants.js").FILE_SYSTEM_NAME,FILE_STORE_NAME=require("../constants.js").FILE_STORE_NAME,WSQL_VERSION=require("../constants.js").WSQL_VERSION,WSQL_SIZE=require("../constants.js").WSQL_SIZE,WSQL_DESC=require("../constants.js").WSQL_DESC,Errors=require("../errors.js"),FilerBuffer=require("../buffer.js"),base64ArrayBuffer=require("base64-arraybuffer");WebSQLContext.prototype.clear=function(t){function e(e,n){t(n)}function n(e,n){t(null)}this.getTransaction(function(t){t.executeSql("DELETE FROM "+FILE_STORE_NAME+";",[],n,e)})},WebSQLContext.prototype.getObject=function(t,e){_get(this.getTransaction,t,function(t,n){if(t)return e(t);try{n&&(n=JSON.parse(n))}catch(t){return e(t)}e(null,n)})},WebSQLContext.prototype.getBuffer=function(t,e){_get(this.getTransaction,t,function(t,n){if(t)return e(t);if(n||""===n){var o=base64ArrayBuffer.decode(n);n=new FilerBuffer(o)}e(null,n)})},WebSQLContext.prototype.putObject=function(t,e,n){var o=JSON.stringify(e);_put(this.getTransaction,t,o,n)},WebSQLContext.prototype.putBuffer=function(t,e,n){var o=base64ArrayBuffer.encode(e.buffer);_put(this.getTransaction,t,o,n)},WebSQLContext.prototype.delete=function(t,e){function n(t,n){e(null)}function o(t,n){e(n)}this.getTransaction(function(e){e.executeSql("DELETE FROM "+FILE_STORE_NAME+" WHERE id = ?;",[t],n,o)})},WebSQL.isSupported=function(){return!!global.openDatabase},WebSQL.prototype.open=function(t){function e(e,n){5===n.code&&t(new Errors.EINVAL("WebSQL cannot be accessed. If private browsing is enabled, disable it.")),t(n)}function n(e,n){o.db=r,t()}var o=this;if(o.db)return t();var r=global.openDatabase(o.name,WSQL_VERSION,WSQL_DESC,WSQL_SIZE);return r?void r.transaction(function(t){function o(t){t.executeSql("CREATE INDEX IF NOT EXISTS idx_"+FILE_STORE_NAME+"_id on "+FILE_STORE_NAME+" (id);",[],n,e)}t.executeSql("CREATE TABLE IF NOT EXISTS "+FILE_STORE_NAME+" (id unique, data TEXT);",[],o,e)}):void t("[WebSQL] Unable to open database.")},WebSQL.prototype.getReadOnlyContext=function(){return new WebSQLContext(this.db,!0)},WebSQL.prototype.getReadWriteContext=function(){return new WebSQLContext(this.db,!1)},module.exports=WebSQL;
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"../buffer.js":15,"../constants.js":16,"../errors.js":19,"base64-arraybuffer":1}],31:[function(require,module,exports){
function guid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(x){var r=16*Math.random()|0,n="x"==x?r:3&r|8;return n.toString(16)}).toUpperCase()}function nop(){}function u8toArray(x){for(var r=[],n=x.length,o=0;o<n;o++)r[o]=x[o];return r}module.exports={guid:guid,u8toArray:u8toArray,nop:nop};
},{}],32:[function(require,module,exports){
var defaults=require("../constants.js").ENVIRONMENT;module.exports=function(t){t=t||{},t.TMP=t.TMP||defaults.TMP,t.PATH=t.PATH||defaults.PATH,this.get=function(e){return t[e]},this.set=function(e,s){t[e]=s}};
},{"../constants.js":16}],33:[function(require,module,exports){
function Shell(n,i){i=i||{};var t=new Environment(i.env),r="/";Object.defineProperty(this,"fs",{get:function(){return n},enumerable:!0}),Object.defineProperty(this,"env",{get:function(){return t},enumerable:!0}),this.cd=function(i,t){i=Path.resolve(r,i),n.stat(i,function(n,e){return n?void t(new Errors.ENOTDIR(null,i)):void("DIRECTORY"===e.type?(r=i,t()):t(new Errors.ENOTDIR(null,i)))})},this.pwd=function(){return r}}var Path=require("../path.js"),Errors=require("../errors.js"),Environment=require("./environment.js"),async=require("../../lib/async.js"),Encoding=require("../encoding.js"),minimatch=require("minimatch");Shell.prototype.exec=function(n,i,t){var r=this,e=r.fs;"function"==typeof i&&(t=i,i=[]),i=i||[],t=t||function(){},n=Path.resolve(r.pwd(),n),e.readFile(n,"utf8",function(n,r){if(n)return void t(n);try{var o=new Function("fs","args","callback",r);o(e,i,t)}catch(n){t(n)}})},Shell.prototype.touch=function(n,i,t){function r(n){u.writeFile(n,"",t)}function e(n){var r=Date.now(),e=i.date||r,o=i.date||r;u.utimes(n,e,o,t)}var o=this,u=o.fs;"function"==typeof i&&(t=i,i={}),i=i||{},t=t||function(){},n=Path.resolve(o.pwd(),n),u.stat(n,function(o,u){o?i.updateOnly===!0?t():r(n):e(n)})},Shell.prototype.cat=function(n,i){function t(n,i){var t=Path.resolve(r.pwd(),n);e.readFile(t,"utf8",function(n,t){return n?void i(n):(o+=t+"\n",void i())})}var r=this,e=r.fs,o="";return i=i||function(){},n?(n="string"==typeof n?[n]:n,void async.eachSeries(n,t,function(n){n?i(n):i(null,o.replace(/\n$/,""))})):void i(new Errors.EINVAL("Missing files argument"))},Shell.prototype.ls=function(n,i,t){function r(n,t){var u=Path.resolve(e.pwd(),n),a=[];o.readdir(u,function(n,e){function c(n,t){n=Path.join(u,n),o.stat(n,function(e,o){if(e)return void t(e);var c={path:Path.basename(n),links:o.nlinks,size:o.size,modified:o.mtime,type:o.type};i.recursive&&"DIRECTORY"===o.type?r(Path.join(u,c.path),function(n,i){return n?void t(n):(c.contents=i,a.push(c),void t())}):(a.push(c),t())})}return n?void t(n):void async.eachSeries(e,c,function(n){t(n,a)})})}var e=this,o=e.fs;return"function"==typeof i&&(t=i,i={}),i=i||{},t=t||function(){},n?void r(n,t):void t(new Errors.EINVAL("Missing dir argument"))},Shell.prototype.rm=function(n,i,t){function r(n,t){n=Path.resolve(e.pwd(),n),o.stat(n,function(e,u){return e?void t(e):"FILE"===u.type?void o.unlink(n,t):void o.readdir(n,function(e,u){return e?void t(e):0===u.length?void o.rmdir(n,t):i.recursive?(u=u.map(function(i){return Path.join(n,i)}),void async.eachSeries(u,r,function(i){return i?void t(i):void o.rmdir(n,t)})):void t(new Errors.ENOTEMPTY(null,n))})})}var e=this,o=e.fs;return"function"==typeof i&&(t=i,i={}),i=i||{},t=t||function(){},n?void r(n,t):void t(new Errors.EINVAL("Missing path argument"))},Shell.prototype.tempDir=function(n){var i=this,t=i.fs,r=i.env.get("TMP");n=n||function(){},t.mkdir(r,function(i){n(null,r)})},Shell.prototype.mkdirp=function(n,i){function t(n,i){e.stat(n,function(r,o){if(o){if(o.isDirectory())return void i();if(o.isFile())return void i(new Errors.ENOTDIR(null,n))}else{if(r&&"ENOENT"!==r.code)return void i(r);var u=Path.dirname(n);"/"===u?e.mkdir(n,function(n){return n&&"EEXIST"!=n.code?void i(n):void i()}):t(u,function(t){return t?i(t):void e.mkdir(n,function(n){return n&&"EEXIST"!=n.code?void i(n):void i()})})}})}var r=this,e=r.fs;return i=i||function(){},n?"/"===n?void i():void t(n,i):void i(new Errors.EINVAL("Missing path argument"))},Shell.prototype.find=function(n,i,t){function r(n,i){c(n,function(t){return t?void i(t):(s.push(n),void i())})}function e(n,t){var e=Path.removeTrailing(n);return i.regex&&!i.regex.test(e)?void t():i.name&&!minimatch(Path.basename(e),i.name)?void t():i.path&&!minimatch(Path.dirname(e),i.path)?void t():void r(n,t)}function o(n,i){n=Path.resolve(u.pwd(),n),a.readdir(n,function(t,r){return t?void("ENOTDIR"===t.code?e(n,i):i(t)):void e(Path.addTrailing(n),function(t){return t?void i(t):(r=r.map(function(i){return Path.join(n,i)}),void async.eachSeries(r,o,function(n){i(n,s)}))})})}var u=this,a=u.fs;"function"==typeof i&&(t=i,i={}),i=i||{},t=t||function(){};var c=i.exec||function(n,i){i()},s=[];return n?void a.stat(n,function(i,r){return i?void t(i):r.isDirectory()?void o(n,t):void t(new Errors.ENOTDIR(null,n))}):void t(new Errors.EINVAL("Missing path argument"))},module.exports=Shell;
},{"../../lib/async.js":10,"../encoding.js":18,"../errors.js":19,"../path.js":26,"./environment.js":32,"minimatch":14}],34:[function(require,module,exports){
function Stats(t,s){this.node=t.id,this.dev=s,this.size=t.size,this.nlinks=t.nlinks,this.atime=t.atime,this.mtime=t.mtime,this.ctime=t.ctime,this.type=t.mode}var Constants=require("./constants.js");Stats.prototype.isFile=function(){return this.type===Constants.MODE_FILE},Stats.prototype.isDirectory=function(){return this.type===Constants.MODE_DIRECTORY},Stats.prototype.isSymbolicLink=function(){return this.type===Constants.MODE_SYMBOLIC_LINK},Stats.prototype.isSocket=Stats.prototype.isFIFO=Stats.prototype.isCharacterDevice=Stats.prototype.isBlockDevice=function(){return!1},module.exports=Stats;
},{"./constants.js":16}],35:[function(require,module,exports){
function SuperNode(e){var t=Date.now();this.id=Constants.SUPER_NODE_ID,this.mode=Constants.MODE_META,this.atime=e.atime||t,this.ctime=e.ctime||t,this.mtime=e.mtime||t,this.rnode=e.rnode}var Constants=require("./constants.js");SuperNode.create=function(e,t){e.guid(function(n,o){return n?void t(n):(e.rnode=e.rnode||o,void t(null,new SuperNode(e)))})},module.exports=SuperNode;
},{"./constants.js":16}],36:[function(require,module,exports){
!function(t){"use strict";function e(){this.addSlashToEnd=function(t){var e,r;return t&&(e=t.length-1,r="/"===t[e],r||(t+="/")),t},this.size=function(t){var e="number"==typeof t,r=1024,n=r*r,o=n*r,i=o*r,s=i*r;return e&&(t<r?t+="b":t=t<n?(t/r).toFixed(2)+"kb":t<o?(t/n).toFixed(2)+"mb":t<i?(t/o).toFixed(2)+"gb":t<s?(t/i).toFixed(2)+"tb":(t/s).toFixed(2)+"pb"),t},this.permissions={symbolic:function(t){var e,r,n,o,i=void 0!==typeof t,s="",u="";if(i){switch(s=t.toString(),e=s.charAt(0),e-0){case 1:e="-";break;case 2:e="c";break;case 4:e="d";break;default:e="-"}s=s.length>5?s.substr(3):s.substr(2),r=(s[0]-0).toString(2),n=(s[1]-0).toString(2),o=(s[2]-0).toString(2),u=(r[0]-0>0?"r":"-")+(r[1]-0>0?"w":"-")+(r[2]-0>0?"x":"-")+" "+(n[0]-0>0?"r":"-")+(n[1]-0>0?"w":"-")+(n[2]-0>0?"x":"-")+" "+(o[0]-0>0?"r":"-")+(o[1]-0>0?"w":"-")+(o[2]-0>0?"x":"-")}return u},numeric:function(t){var e,r,n,o=t&&11===t.length;return o&&(e=("r"===t[0]?4:0)+("w"===t[1]?2:0)+("x"===t[2]?1:0),r=("r"===t[4]?4:0)+("w"===t[5]?2:0)+("x"===t[6]?1:0),n=("r"===t[8]?4:0)+("w"===t[9]?2:0)+("x"===t[10]?1:0),t="00"+e+r+n),t}}}"object"==typeof module&&module.exports?module.exports=new e:t.Format=new e}(this);
},{}],37:[function(require,module,exports){
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:(s?-1:1)*(1/0);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),o+=p+N>=1?n/f:n*Math.pow(2,1-N),o*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};
},{}],38:[function(require,module,exports){
var toString={}.toString;module.exports=Array.isArray||function(r){return"[object Array]"==toString.call(r)};
},{}],39:[function(require,module,exports){
function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}var process=module.exports={},cachedSetTimeout,cachedClearTimeout;!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var queue=[],draining=!1,currentQueue,queueIndex=-1;process.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var u=1;u<arguments.length;u++)t[u-1]=arguments[u];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};
},{}],40:[function(require,module,exports){
"use strict";function check(e,t){var o={}.toString.call(e);if(e&&"[object Date]"!==o)throw Error("date should be Date!");if(t&&"object"!=typeof t)throw Error("options should be object!")}module.exports=function(e,t){var o,r,i,a,c,l;switch(e=e||new Date,check(e,t),t||(t={}),o=t.sep||".",r=t.order||"big",a=e.getDate(),c=e.getMonth()+1,l=e.getFullYear(),c<=9&&(c="0"+c),a<=9&&(a="0"+a),r){case"big":i=[l,c,a].join(o);break;case"middle":i=[c,a,l].join(o);break;case"little":i=[a,c,l].join(o);break;default:throw Error('order could be "big", "middle" and "little" only!')}return i};
},{}],41:[function(require,module,exports){
!function(n){"use strict";function t(){var n=[].slice.call(arguments);return r("function",n),function(){return n.reduceRight(u,arguments).pop()}}function u(n,t){return[t.apply(null,n)]}function r(n,t){var u=e(f,n),r=e(i,n);t.length?t.map(o).filter(r).forEach(u):u(n)}function e(n,t){return n.bind(null,t)}function o(n){return typeof n}function i(n,t){return n!==t}function f(n){throw Error("fn should be "+n+"!")}"undefined"!=typeof module&&module.exports?module.exports=t:n.squad=t}(this);
},{}],42:[function(require,module,exports){
module.exports=require("./lib/zames");
},{"./lib/zames":43}],43:[function(require,module,exports){
"use strict";function check(r){if("function"!=typeof r)throw Error("fn should be a function!")}function checkCount(r){if(r>4)throw Error("fn takes to much arguments, up to 4 supported")}var promisify=require("es6-promisify"),currify=require("currify");module.exports=function(r){check(r),checkCount(r.length);var n=[function(n){return promisify(r)(n)},function(n,t){return promisify(r)(n,t)},function(n,t,i){return promisify(r)(n,t,i)}],t=r.length-2;return currify(n[t])};
},{"currify":5,"es6-promisify":8}],"readify.js":[function(require,module,exports){
(function (process){
"use strict";function readify(r,e){check(r,e),readdir(r).then(getAllStats(r)).then(good(e)).catch(e)}function check(r,e){var t="path should be string!",i="callback should be function!";if("string"!=typeof r)throw Error(t);if("function"!=typeof e)throw Error(i)}function _getAllStats(r,e,t){var i=e.length,n=format.addSlashToEnd(r);if(!i)return fillJSON(n,[],t);var a=e.map(function(r){return getStat_(r,n+r)});exec.parallel(a,function(){for(var r=arguments.length,e=Array(r),i=0;i<r;i++)e[i]=arguments[i];var a=e.slice(1);fillJSON(n,a,t)})}function emptyStat(){return{mode:0,size:0,mtime:0,isDirectory:function(){}}}function getStat(r,e,t){fs.stat(e,function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:emptyStat();i.name=r,t(null,i)})}function parseStat(r){var e=Number(r.mode).toString(8),t=r.uid||"",i=Number(e)||"",n=r.isDirectory(),a=n?"dir":r.size,o=r.mtime?shortdate(r.mtime,{order:"little"}):"";return{name:r.name,size:format.size(a),date:o,owner:t,mode:i&&format.permissions.symbolic(i)}}function fillJSON(r,e,t){var i=squad(changeOrder,sortFiles,parseStats),n={path:"",files:i(e)};n.path=format.addSlashToEnd(r),changeUIDToName(n,function(r,e){n.files=e,t(null,n)})}function changeUIDToName(r,e){nicki?nicki(function(t,i){var n=void 0;n=t?r.files.slice():r.files.map(function(r){var e=r.owner;return i[e]&&(r.owner=i[e]),r}),e(t,n)}):e(null,r.files)}function isDir(r){return"dir"===r.size}function not(r){return function(){return!r.apply(void 0,arguments)}}function changeOrder(r){var e=not(isDir),t=r.filter(isDir),i=r.filter(e),n=t.concat(i);return n}var format=require("format-io"),exec=require("execon"),squad=require("squad"),shortdate=require("shortdate"),promisify=require("es6-promisify"),currify=require("currify"),zames=require("zames/legacy"),WIN="win32"===process.platform,BROWSER="undefined"!=typeof window,map=currify(function(r,e){return e.map(r)}),sort=currify(function(r,e){return e.sort(r)}),parseStats=map(parseStat),getStat_=currify(getStat),getAllStats=zames(_getAllStats),getFS=function(){if(!BROWSER)return require("fs");var r=require("filer");return new r.FileSystem},fs=getFS(),nicki=!WIN&&!BROWSER&&require("nicki"),readdir=promisify(fs.readdir,fs),sortFiles=sort(function(r,e){return r.name>e.name?1:-1}),good=function(r){return function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return r.apply(void 0,[null].concat(t))}};module.exports=readify;
}).call(this,require('_process'))

},{"_process":39,"currify":5,"es6-promisify":8,"execon":9,"filer":23,"format-io":36,"fs":3,"nicki":undefined,"shortdate":40,"squad":41,"zames/legacy":42}]},{},["readify.js"])("readify.js")
});


//# sourceMappingURL=readify.min.js.map